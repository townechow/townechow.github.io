1:"$Sreact.fragment"
2:I[5244,[],""]
3:I[3866,[],""]
5:I[6213,[],"OutletBoundary"]
7:I[6213,[],"MetadataBoundary"]
9:I[6213,[],"ViewportBoundary"]
b:I[4835,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/d498c84e4ab246b3.css","style"]
:HL["/_next/static/css/485ff6fe79292a08.css","style"]
:HL["/_next/static/css/b9d97b2190475167.css","style"]
:HL["/_next/static/css/851cdee6d90716dd.css","style"]
0:{"P":null,"b":"NFjmtHF2up8B2PpbDjLiS","p":"","c":["","front-end","core-modules","executable-code-and-execution-contexts","execution","this"],"i":false,"f":[[["",{"children":["front-end",{"children":[["slug","core-modules/executable-code-and-execution-contexts/execution/this","oc"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d498c84e4ab246b3.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/485ff6fe79292a08.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/b9d97b2190475167.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":["$","body",null,{"className":"__variable_4d318d __variable_ea5f4b antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}],{"children":["front-end",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/851cdee6d90716dd.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","main",null,{"children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","front-end","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],{"children":[["slug","core-modules/executable-code-and-execution-contexts/execution/this","oc"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","front-end","children","$0:f:0:1:2:children:2:children:0","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L4",null,["$","$L5",null,{"children":"$L6"}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","ohUYV9igzRbfqgyTlNPr5",{"children":[["$","$L7",null,{"children":"$L8"}],["$","$L9",null,{"children":"$La"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}]]}],false]],"m":"$undefined","G":["$b","$undefined"],"s":false,"S":true}
c:T8e41,<h1>å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ this</h1>
<p>ä¸šç•Œæ²¡æœ‰ <strong>å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡</strong> çš„å«æ³•ï¼Œä½†æ˜¯ç¬”è€…ç§è‡ªæŠŠ <code>this</code> çš„æŒ‡å‘ç†è§£ä¸ºæ‰§è¡Œæ—¶æ‰€æŒ‡å‘çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<h2>è°ƒç”¨ä½ç½®</h2>
<p>åœ¨ç†è§£ <code>this</code> çš„ç»‘å®šè¿‡ç¨‹ä¹‹å‰ï¼Œé¦–å…ˆè¦ç†è§£ <code>this</code> çš„<strong>è°ƒç”¨ä½ç½®</strong>ï¼šè°ƒç”¨ä½ç½®å°±æ˜¯å‡½æ•°åœ¨ä»£ç ä¸­è¢«è°ƒç”¨çš„ä½ç½®ï¼ˆè€Œä¸æ˜¯å£°æ˜çš„ä½ç½®ï¼‰ã€‚</p>
<p>è€Œè¦ç†è§£ <code>this</code> çš„è°ƒç”¨ä½ç½®ï¼Œæœ€é‡è¦çš„æ˜¯è¦ <strong>åˆ†æè°ƒç”¨æ ˆ</strong>ï¼ˆå°±æ˜¯ä¸ºäº†åˆ°è¾¾å½“å‰æ‰§è¡Œä½ç½®æ‰€è°ƒç”¨çš„æ‰€æœ‰å‡½æ•°ï¼‰ã€‚æˆ‘ä»¬å…³å¿ƒçš„è°ƒç”¨ä½ç½®å°±åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°çš„å‰ä¸€ä¸ªè°ƒç”¨ä¸­ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">baz</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// å½“å‰è°ƒç”¨æ ˆæ˜¯ï¼šbaz</span>
  <span class="hljs-comment">// å› æ­¤ï¼Œå½“å‰è°ƒç”¨ä½ç½®æ˜¯å…¨å±€ä½œç”¨åŸŸ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;baz&#x27;</span>);
  <span class="hljs-title function_">bar</span>(); <span class="hljs-comment">// &lt;-- bar çš„è°ƒç”¨çš„ä½ç½®</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// å½“å‰è°ƒç”¨æ ˆæ˜¯ baz -&gt; bar</span>
  <span class="hljs-comment">// å› æ­¤ï¼Œå½“å‰è°ƒç”¨è°ƒç”¨ä½ç½®åœ¨ baz ä¸­</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;bar&#x27;</span>);
  <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// &lt;-- foo çš„è°ƒç”¨ä½ç½®</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// å½“å‰è°ƒç”¨æ ˆæ˜¯ baz -&gt; bar -&gt; foo</span>
  <span class="hljs-comment">// å› æ­¤ï¼Œå½“å‰è°ƒç”¨ä½ç½®åœ¨ bar ä¸­</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;foo&#x27;</span>);
}

<span class="hljs-title function_">baz</span>(); <span class="hljs-comment">// &lt;-- baz çš„è°ƒç”¨ä½ç½®</span>
</code></pre>
<p>æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•ä»è°ƒç”¨æ ˆä¸­åˆ†æå‡ºçœŸæ­£çš„è°ƒç”¨ä½ç½®ï¼Œå› ä¸ºå®ƒå†³å®šäº† <code>this</code> çš„ç»‘å®šã€‚</p>
<h2>ç»‘å®šè§„åˆ™</h2>
<p>å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ä¸­è°ƒç”¨ä½ç½®å†³å®š <code>this</code> çš„ <strong>ç»‘å®šå¯¹è±¡</strong>ã€‚</p>
<p>ä½ å¿…é¡»æ‰¾åˆ°è°ƒç”¨ä½ç½®ï¼Œç„¶ååˆ¤æ–­éœ€è¦åº”ç”¨ä¸‹é¢å››æ¡è§„åˆ™ä¸­çš„å“ªä¸€æ¡ã€‚æˆ‘ä»¬é¦–å…ˆä¼šåˆ†åˆ«è§£é‡Šè¿™å››æ¡è§„åˆ™ï¼Œç„¶åè§£é‡Šå¤šæ¡è§„åˆ™éƒ½å¯ç”¨æ—¶å®ƒä»¬çš„ä¼˜å…ˆçº§å¦‚ä½•æ’åˆ—ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code>(è°ƒç”¨æ ˆ) =&gt; <span class="hljs-function">(<span class="hljs-params">è°ƒç”¨ä½ç½®</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">ç»‘å®šè§„åˆ™</span>) =&gt;</span> è§„åˆ™ä¼˜å…ˆçº§;
</code></pre>
<h3>é»˜è®¤ç»‘å®š</h3>
<p>é¦–å…ˆè¦ä»‹ç»çš„æ˜¯æœ€å¸¸ç”¨çš„å‡½æ•°è°ƒç”¨ç±»å‹ï¼š<strong>ç‹¬ç«‹å‡½æ•°è°ƒç”¨</strong>ã€‚å¯ä»¥æŠŠè¿™æ¡è§„åˆ™çœ‹ä½œæ˜¯æ— æ³•åº”ç”¨å…¶ä»–è§„åˆ™æ—¶çš„é»˜è®¤è§„åˆ™ã€‚</p>
<p>ğŸŒ° <strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-comment">// å£°æ˜åœ¨å…¨å±€ä½œç”¨åŸŸä¸­çš„å˜é‡å°±æ˜¯å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªåŒåå±æ€§</span>
<span class="hljs-comment">// ç›¸å½“äº window.a = 2</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-number">2</span>;

<span class="hljs-comment">// è°ƒç”¨ foo å‡½æ•°æ—¶ this.a è¢«è§£ææˆäº†å…¨å±€å˜é‡ a</span>
<span class="hljs-comment">// å› ä¸ºåœ¨æœ¬ä¾‹ä¸­ï¼Œå‡½æ•°è°ƒç”¨æ—¶åº”ç”¨äº† this çš„é»˜è®¤ç»‘å®š</span>
<span class="hljs-comment">// å› æ­¤ this æŒ‡å‘å…¨å±€å¯¹è±¡ global objects æˆ– window objects</span>
<span class="hljs-comment">// åˆ†æè°ƒç”¨ä½ç½®æ¥è·çŸ¥ foo æ˜¯å¦‚ä½•è°ƒç”¨çš„</span>
<span class="hljs-comment">// foo å‡½æ•°ç›´æ¥ä½¿ç”¨ä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°å¼•ç”¨è¿›è¡Œè°ƒç”¨ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨é»˜è®¤ç»‘å®šï¼Œæ— æ³•åº”ç”¨å…¶ä»–è§„åˆ™</span>
<span class="hljs-title function_">foo</span>();
<span class="hljs-comment">// 2</span>
</code></pre>
<p>å¦‚æœä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ˆStrict Modeï¼‰ï¼Œåˆ™ä¸èƒ½å°†å…¨å±€å¯¹è±¡ç”¨äºé»˜è®¤ç»‘å®šï¼Œå› æ­¤ <code>this</code> ä¼šç»‘å®šåˆ° <code>undefined</code>ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-string">&#x27;use strict&#x27;</span>;

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">var</span> a = <span class="hljs-number">2</span>;

<span class="hljs-title function_">foo</span>();
<span class="hljs-comment">// TypeError:this is undefined</span>
</code></pre>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå¾®å¦™ä½†æ˜¯éå¸¸é‡è¦çš„ç»†èŠ‚ï¼Œè™½ç„¶ <code>this</code> çš„ç»‘å®šè§„åˆ™å®Œå…¨å–å†³äºè°ƒç”¨ä½ç½®ï¼Œä½†æ˜¯åªæœ‰ <code>foo()</code> è¿è¡Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹æ—¶ï¼Œé»˜è®¤ç»‘å®šæ‰èƒ½ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ï¼›åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹è°ƒç”¨ <code>foo</code> åˆ™ä¸å—é»˜è®¤ç»‘å®šå½±å“ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">var</span> a = <span class="hljs-number">2</span>;

(<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-string">&#x27;use strict&#x27;</span>;

  <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 2</span>
})();
</code></pre>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šé€šå¸¸æ¥è¯´ä½ ä¸åº”è¯¥åœ¨ä»£ç ä¸­æ··åˆä½¿ç”¨ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ã€‚æ•´ä¸ªç¨‹åºè¦ä¹ˆä¸¥æ ¼è¦ä¹ˆéä¸¥æ ¼ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å€™ä½ å¯èƒ½ä¼šç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œå…¶ä¸¥æ ¼ç¨‹åº¦å’Œä½ ä»£ç æœ‰æ‰€ä¸åŒï¼Œå› æ­¤ä¸€å®šè¦æ³¨æ„è¿™ç±»å…¼å®¹æ€§ç»†èŠ‚ã€‚</p>
<h3>éšå¼ç»‘å®š</h3>
<p>å¦ä¸€æ¡éœ€è¦è€ƒè™‘çš„è§„åˆ™æ˜¯è°ƒç”¨ä½ç½®æ˜¯å¦æœ‰<strong>ä¸Šä¸‹æ–‡å¯¹è±¡</strong>ï¼Œæˆ–è€…è¯´æ˜¯å¦<strong>è¢«æŸä¸ªå¯¹è±¡æ‹¥æœ‰æˆ–è€…åŒ…å«</strong>ï¼Œä¸è¿‡è¿™ç§è¯´æ³•å¯èƒ½ä¼šé€ æˆä¸€äº›è¯¯å¯¼ã€‚</p>
<p>ğŸŒ° <strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">const</span> container = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>: foo,
};

container.<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 2</span>
</code></pre>
<p>é¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ <code>foo</code> çš„å£°æ˜æ–¹å¼ï¼ŒåŠå…¶ä¹‹åæ˜¯å¦‚ä½•è¢«å½“ä½œå¼•ç”¨å±æ€§æ·»åŠ åˆ° <code>container</code> ä¸­çš„ã€‚ä½†æ˜¯æ— è®ºæ˜¯ç›´æ¥åœ¨ <code>container</code> ä¸­å®šä¹‰è¿˜æ˜¯å…ˆå®šä¹‰å†æ·»åŠ ä¸ºå¼•ç”¨å±æ€§ï¼Œè¿™ä¸ªå‡½æ•°ä¸¥æ ¼æ¥è¯´éƒ½ä¸å±äº <code>container</code> å¯¹è±¡ã€‚</p>
<p>ç„¶è€Œï¼Œè°ƒç”¨ä½ç½®ä¼šä½¿ç”¨ <code>container</code> ä¸Šä¸‹æ–‡æ¥å¼•ç”¨å‡½æ•°ï¼Œå› æ­¤ä½ å¯ä»¥è¯´å‡½æ•°è¢«è°ƒç”¨æ—¶ <code>container</code> å¯¹è±¡ <strong>æ‹¥æœ‰</strong> æˆ–è€… <strong>åŒ…å«</strong> å®ƒã€‚</p>
<p>æ— è®ºä½ å¦‚ä½•ç§°å‘¼è¿™ä¸ªæ¨¡å¼ï¼Œå½“ <code>foo</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒçš„å‰é¢ç¡®å®åŠ ä¸Šäº†å¯¹ <code>container</code> çš„å¼•ç”¨ã€‚å½“å‡½æ•°å¼•ç”¨æœ‰ä¸Šä¸‹æ–‡æ—¶ï¼Œéšå¼ç»‘å®šè§„åˆ™ä¼šæŠŠå‡½æ•°è°ƒç”¨ä¸­çš„ <code>this</code> ç»‘å®šåˆ°è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚å› ä¸ºè°ƒç”¨ <code>foo</code> æ—¶ <code>this</code> è¢«ç»‘å®šåˆ° <code>container</code> ä¸Šï¼Œå› æ­¤ <code>this.a</code> å’Œ <code>container.a</code> æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>ğŸ’¡ <strong>å¯¹è±¡å±æ€§å¼•ç”¨é“¾ä¸­åªæœ‰ä¸Šä¸€å±‚æˆ–æœ€åä¸€å±‚åœ¨è°ƒç”¨ä½ç½®ä¸­èµ·ä½œç”¨ã€‚</strong></p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">var</span> obj2 = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">42</span>,
  <span class="hljs-attr">foo</span>: foo,
};

<span class="hljs-keyword">var</span> obj1 = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">obj2</span>: obj2,
};

obj1.<span class="hljs-property">obj2</span>.<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 42</span>
</code></pre>
<h4>éšå¼ä¸¢å¤±</h4>
<p>ä¸€ä¸ªæœ€å¸¸è§çš„ <code>this</code> ç»‘å®šé—®é¢˜å°±æ˜¯<strong>è¢«éšå¼ç»‘å®šçš„å‡½æ•°ä¼šä¸¢å¤±ç»‘å®šå¯¹è±¡</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šåº”ç”¨é»˜è®¤ç»‘å®šï¼Œä»è€ŒæŠŠ <code>this</code> ç»‘å®šåˆ°å…¨å±€å¯¹è±¡æˆ–è€… <code>undefined</code> ä¸Šï¼ˆè¿™å–å†³äºæ˜¯å¦æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼‰ã€‚</p>
<p>ğŸŒ° <strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">const</span> container = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>: foo,
};

<span class="hljs-comment">// å‡½æ•°åˆ«å</span>
<span class="hljs-keyword">const</span> bar = container.<span class="hljs-property">foo</span>;

<span class="hljs-comment">// a æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§</span>
<span class="hljs-keyword">const</span> a = <span class="hljs-string">&#x27;Hello world!&#x27;</span>;

<span class="hljs-title function_">bar</span>();
<span class="hljs-comment">// &quot;Hello world!&quot;</span>
</code></pre>
<p>ğŸ“ è™½ç„¶ <code>bar</code> æ˜¯ <code>container.foo</code> çš„ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¼•ç”¨çš„æ˜¯ <code>foo</code> å‡½æ•°æœ¬èº«ï¼Œå› æ­¤æ­¤æ—¶çš„ <code>bar</code> å…¶å®æ˜¯ä¸€ä¸ªä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°è°ƒç”¨ï¼Œå› æ­¤åº”ç”¨äº†é»˜è®¤ç»‘å®šã€‚</p>
<p>ä¸€ç§æ›´å¾®å¦™ã€æ›´å¸¸è§å¹¶ä¸”æ›´å‡ºä¹æ„æ–™çš„æƒ…å†µå‘ç”Ÿåœ¨ä¼ å…¥å›è°ƒå‡½æ•°æ—¶ã€‚</p>
<p>ğŸŒ° <strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-comment">// fn å…¶å®å¼•ç”¨çš„æ˜¯ foo</span>
  <span class="hljs-title function_">fn</span>(); <span class="hljs-comment">// &lt;--è°ƒç”¨ä½ç½®</span>
}

<span class="hljs-keyword">var</span> container = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>: foo,
};

<span class="hljs-comment">// a æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-string">&#x27;Hello world!&#x27;</span>;

<span class="hljs-title function_">bar</span>(container.<span class="hljs-property">foo</span>);
<span class="hljs-comment">// &quot;Hello world!&quot;</span>
</code></pre>
<p>å‚æ•°ä¼ é€’å…¶å®æ˜¯ä¸€ç§<strong>éšå¼èµ‹å€¼</strong>ï¼Œå› æ­¤æˆ‘ä»¬ä¼ å…¥å‡½æ•°æ—¶ä¹Ÿä¼šè¢«éšå¼èµ‹å€¼ï¼Œæ‰€ä»¥ç»“æœå’Œä¸Šä¸ªç¤ºä¾‹ä¸€æ ·ã€‚</p>
<p>å¦‚æœæŠŠå‡½æ•°ä¼ å…¥è¯­è¨€å†…ç½®çš„å‡½æ•°è€Œä¸æ˜¯ä¼ å…¥ä½ è‡ªå·±å£°æ˜çš„å‡½æ•°ï¼Œç»“æœæ˜¯ä¸€æ ·çš„ï¼Œæ²¡æœ‰åŒºåˆ«ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">const</span> container = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>: foo,
};

<span class="hljs-comment">// a æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-string">&#x27;Hello world!&#x27;</span>;

<span class="hljs-built_in">setTimeout</span>(container.<span class="hljs-property">foo</span>, <span class="hljs-number">100</span>);
<span class="hljs-comment">// &#x27;Hello world!&#x27;</span>
</code></pre>
<p>å›è°ƒå‡½æ•°ä¸¢å¤± <code>this</code> ç»‘å®šæ˜¯éå¸¸å¸¸è§çš„ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µ <code>this</code> çš„è¡Œä¸ºä¼šå‡ºä¹æˆ‘ä»¬æ„æ–™ï¼šè°ƒç”¨å›è°ƒå‡½æ•°çš„å‡½æ•°å¯èƒ½ä¼šä¿®æ”¹ <code>this</code>ã€‚åœ¨ä¸€äº›æµè¡Œçš„ JavaScript åº“ä¸­äº‹ä»¶å¤„ç†å™¨ä¼šæŠŠå›è°ƒå‡½æ•°çš„ <code>this</code> å¼ºåˆ¶ç»‘å®šåˆ°è§¦å‘äº‹ä»¶çš„ DOM å…ƒç´ ä¸Šã€‚è¿™åœ¨ä¸€äº›æƒ…å†µä¸‹å¯èƒ½å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯æœ‰æ—¶å®ƒå¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°éå¸¸éƒé—·ã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™äº›å·¥å…·é€šå¸¸æ— æ³•é€‰æ‹©æ˜¯å¦å¯ç”¨è¿™ä¸ªè¡Œä¸ºã€‚</p>
<p>æ— è®ºæ˜¯å“ªç§æƒ…å†µï¼Œ<code>this</code> çš„æ”¹å˜éƒ½æ˜¯æ„æƒ³ä¸åˆ°çš„ï¼Œå®é™…ä¸Šä½ æ— æ³•æ§åˆ¶å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ–¹å¼ï¼Œå› æ­¤å°±æ²¡æœ‰åŠæ³•æ§åˆ¶è°ƒç”¨ä½ç½®ä»¥å¾—åˆ°æœŸæœ›çš„ç»‘å®šã€‚ä¹‹åæˆ‘ä»¬ä¼šä»‹ç»å¦‚ä½•é€šè¿‡å›ºå®š <code>this</code> æ¥ä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3>æ˜¾å¼ç»‘å®š</h3>
<p>å°±åƒæˆ‘ä»¬åˆšæ‰çœ‹åˆ°çš„é‚£æ ·ï¼Œåœ¨åˆ†æéšå¼ç»‘å®šæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä¸€ä¸ªå¯¹è±¡å†…éƒ¨åŒ…å«ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„å±æ€§ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå±æ€§é—´æ¥å¼•ç”¨å‡½æ•°ï¼Œä»è€ŒæŠŠ <code>this</code> éšå¼ç»‘å®šåˆ°è¯¥å¯¹è±¡ä¸Šã€‚</p>
<p>JavaScript æä¾›äº† <code>apply</code>ã€<code>call</code> å’Œ <code>bind</code> æ–¹æ³•ï¼Œä¸ºåˆ›å»ºçš„æ‰€æœ‰å‡½æ•° <strong>ç»‘å®šå®¿ä¸»ç¯å¢ƒ</strong>ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ç»‘å®šå‡½æ•°çš„ <code>this</code> æŒ‡å‘ç§°ä¸º <strong>æ˜¾å¼ç»‘å®š</strong>ã€‚</p>
<h4>ç¡¬ç»‘å®š</h4>
<p>ç¡¬ç»‘å®šå¯ä»¥è§£å†³ä¹‹å‰æå‡ºçš„ä¸¢å¤±ç»‘å®šçš„é—®é¢˜ã€‚</p>
<p>ğŸŒ° <strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ths.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">const</span> container = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
};

<span class="hljs-keyword">var</span> bar = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
  foo.<span class="hljs-title function_">call</span>(container);
};

<span class="hljs-title function_">bar</span>();
<span class="hljs-comment">// 2</span>

<span class="hljs-built_in">setTimeout</span>(bar, <span class="hljs-number">100</span>);
<span class="hljs-comment">// 2</span>

<span class="hljs-comment">// ç¡¬ç»‘å®šçš„ bar ä¸å¯èƒ½å†ä¿®æ”¹å®ƒçš„ this</span>
bar.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">window</span>);
<span class="hljs-comment">// 2</span>
</code></pre>
<p>æˆ‘ä»¬åˆ›å»ºäº†å‡½æ•° <code>bar</code>ï¼Œå¹¶åœ¨å®ƒçš„å†…éƒ¨æ‰‹åŠ¨è°ƒç”¨äº† <code>foo.call(container)</code> ï¼Œå› æ­¤å¼ºåˆ¶æŠŠ <code>foo</code> çš„ <code>this</code> ç»‘å®šåˆ°äº† <code>container</code> ã€‚æ— è®ºä¹‹åå¦‚ä½•è°ƒç”¨å‡½æ•° <code>bar</code>ï¼Œå®ƒæ€»ä¼šæ‰‹åŠ¨åœ¨ <code>container</code> ä¸Šè°ƒç”¨ <code>foo</code>ã€‚è¿™ç§ç»‘å®šæ˜¯ä¸€ç§æ˜¾å¼ï¼ˆæ‰‹åŠ¨ï¼‰çš„å¼ºåˆ¶ç»‘å®šï¼Œå› æ­¤æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>ç¡¬ç»‘å®š</strong>ã€‚</p>
<h4>å†…ç½®å‡½æ•°</h4>
<p>ç¬¬ä¸‰æ–¹åº“çš„è®¸å¤šå‡½æ•°ï¼Œä»¥åŠ JavaScript è¯­è¨€å’Œå®¿ä¸»ç¯å¢ƒä¸­è®¸å¤šæ–°çš„å†…ç½®å‡½æ•°ï¼Œéƒ½æä¾›äº†ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œé€šå¸¸è¢«ç§°ä¸º <strong>ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰</strong>ï¼Œå…¶ä½œç”¨å’Œ <code>bind</code> ä¸€æ ·ï¼Œç¡®ä¿ä½ çš„å›è°ƒå‡½æ•°ä½¿ç”¨æŒ‡å®šçš„ <code>this</code> ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">item</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>, item);
}

<span class="hljs-keyword">const</span> columns = {
  <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;No:&#x27;</span>,
}[
  <span class="hljs-comment">// è°ƒç”¨ foo æ—¶æŠŠ this ç»‘å®šåˆ° columns</span>
  (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
].<span class="hljs-title function_">forEach</span>(foo, columns);
<span class="hljs-comment">// No:1 No:2 No:3</span>
</code></pre>
<p>è¿™äº›å‡½æ•°å®é™…ä¸Šå°±æ˜¯é€šè¿‡ <code>call</code> æˆ–è€… <code>apply</code> å®ç°äº†æ˜¾å¼ç»‘å®šï¼Œè¿™æ ·ä»£ç ä¼šæ›´åŠ ä¼˜é›…ã€‚</p>
<h3>æ„é€ è°ƒç”¨ç»‘å®š</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œæ„é€ å‡½æ•°åªæ˜¯ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒä»¬å¹¶ä¸ä¼šå±äºæŸä¸ªç±»ï¼Œä¹Ÿä¸ä¼šå®ä¾‹åŒ–ä¸€ä¸ªç±»ï¼Œå®é™…ä¸Šï¼Œå®ƒä»¬ç”šè‡³éƒ½ä¸èƒ½è¯´æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ç±»å‹ï¼Œå®ƒä»¬åªæ˜¯è¢« <code>new</code> æ“ä½œç¬¦è°ƒç”¨çš„æ™®é€šå‡½æ•°è€Œå·²ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œæ€è€ƒä¸€ä¸‹ <code>Number()</code> ä½œä¸ºæ„é€ å‡½æ•°æ—¶çš„è¡Œä¸ºï¼ŒES5.1 ä¸­è¿™æ ·æè¿°å®ƒï¼š</p>
<blockquote>
<p>15.7.2 Number æ„é€ å‡½æ•°</p>
<p>å½“ Number åœ¨ <code>new</code> è¡¨è¾¾å¼ä¸­è¢«è°ƒç”¨æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼šå®ƒä¼šåˆå§‹åŒ–æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼ŒåŒ…æ‹¬å†…ç½®å¯¹è±¡å‡½æ•°åœ¨å†…çš„æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥ç”¨ <code>new</code> æ¥è°ƒç”¨ï¼Œè¿™ç§å‡½æ•°è°ƒç”¨è¢«ç§°ä¸º <strong>æ„é€ å‡½æ•°è°ƒç”¨</strong>ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé‡è¦ä½†æ˜¯éå¸¸ç»†å¾®çš„åŒºåˆ«ï¼šå®é™…ä¸Šå¹¶ä¸å­˜åœ¨æ‰€è°“çš„æ„é€ å‡½æ•°ï¼Œåªæ˜¯å¯¹äºå‡½æ•°çš„ <strong>æ„é€ è°ƒç”¨</strong>ã€‚</p>
<p>ğŸ‰ ä½¿ç”¨ <code>new</code> æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…è¯´å‘ç”Ÿæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œã€‚</p>
<ol>
<li>åˆ›å»ºå…¨æ–°çš„ç©ºå¯¹è±¡</li>
<li>å°†æ–°å¯¹è±¡çš„éšå¼åŸå‹å¯¹è±¡å…³è”æ„é€ å‡½æ•°çš„æ˜¾å¼åŸå‹å¯¹è±¡</li>
<li>æ‰§è¡Œå¯¹è±¡ç±»çš„æ„é€ å‡½æ•°ï¼ŒåŒæ—¶è¯¥å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•è¢« <code>this</code> æ‰€å¼•ç”¨ï¼Œå³ <code>this</code> æŒ‡å‘æ–°æ„é€ çš„å®ä¾‹</li>
<li>å¦‚æœæ„é€ å‡½æ•°æ‰§è¡Œåæ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆ <code>new</code> è¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡</li>
</ol>
<p>ğŸ¯ <strong>æ¨¡æ‹Ÿè¿‡ç¨‹ï¼š</strong></p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">objectFactory</span>(<span class="hljs-params">constructor, ...rest</span>) {
  <span class="hljs-comment">// åˆ›å»ºç©ºå¯¹è±¡ï¼Œç©ºå¯¹è±¡å…³è”æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> instance = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);

  <span class="hljs-comment">// æ‰§è¡Œå¯¹è±¡ç±»çš„æ„é€ å‡½æ•°ï¼ŒåŒæ—¶è¯¥å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•è¢« this æ‰€å¼•ç”¨ï¼Œå³ this æŒ‡å‘æ–°æ„é€ çš„å®ä¾‹</span>
  <span class="hljs-keyword">const</span> result = constructor.<span class="hljs-title function_">apply</span>(instance, rest);

  <span class="hljs-comment">// åˆ¤æ–­æ„é€ å‡½æ•°çš„è¿è¡Œç»“æœæ˜¯å¦å¯¹è±¡ç±»å‹</span>
  <span class="hljs-keyword">if</span> (result !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-regexp">/^(object|function)$/</span>.<span class="hljs-title function_">test</span>(<span class="hljs-keyword">typeof</span> result)) {
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-keyword">return</span> instance;
}
</code></pre>
<p>è§£å‰–å†…éƒ¨æ“ä½œåï¼Œæˆ‘ä»¬èƒ½å¾—å‡ºç»“è®º <code>new</code> æ“ä½œç¬¦æ˜¯ä¸ºäº†å®ç°è¯¥è¿‡ç¨‹çš„ä¸€ç§<strong>è¯­æ³•ç³–</strong>ã€‚</p>
<h2>ä¼˜å…ˆçº§</h2>
<p>ä¸Šæ–‡ä»‹ç»äº†å‡½æ•°è°ƒç”¨ä¸­ <code>this</code> ç»‘å®šçš„å››æ¡è§„åˆ™ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯æ‰¾åˆ°å‡½æ•°çš„è°ƒç”¨ä½ç½®å¹¶åˆ¤æ–­åº”ç”¨å“ªæ¡è§„åˆ™ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŸä¸ªè°ƒç”¨ä½ç½®åº”ç”¨å¤šæ¡è§„åˆ™ï¼Œåˆ™å¿…é¡»ç»™è¿™äº›è§„åˆ™è®¾å®šä¼˜å…ˆçº§ã€‚</p>
<p>æ¯«æ— ç–‘é—®ï¼Œé»˜è®¤ç»‘å®šçš„ä¼˜å…ˆçº§æ˜¯å››æ¡è§„åˆ™ä¸­æœ€ä½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆä¸è€ƒè™‘å®ƒã€‚</p>
<pre class="hljs"><code>æ˜¾å¼ç»‘å®š &gt; æ„é€ è°ƒç”¨ç»‘å®š &gt; éšå¼ç»‘å®š;
</code></pre>
<h3>éšå¼ç»‘å®šå’Œæ˜¾å¼ç»‘å®š</h3>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">const</span> container1 = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">foo</span>: foo,
};

<span class="hljs-keyword">const</span> container2 = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>: foo,
};

container1.<span class="hljs-title function_">foo</span>();
<span class="hljs-comment">// 1</span>
container2.<span class="hljs-title function_">foo</span>();
<span class="hljs-comment">// 2</span>

container1.<span class="hljs-property">foo</span>.<span class="hljs-title function_">call</span>(container2);
<span class="hljs-comment">// 2</span>
container2.<span class="hljs-property">foo</span>.<span class="hljs-title function_">call</span>(container1);
<span class="hljs-comment">// 1</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ˜¾å¼ç»‘å®šä¼˜å…ˆçº§æ›´é«˜ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨åˆ¤æ–­æ—¶åº”å½“å…ˆè€ƒè™‘æ˜¯å¦å¯ä»¥å­˜åœ¨æ˜¾å¼ç»‘å®šã€‚</p>
<h3>æ„é€ è°ƒç”¨ç»‘å®šå’Œéšå¼ç»‘å®š</h3>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">something</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = something;
}

<span class="hljs-keyword">const</span> container1 = {
  <span class="hljs-attr">foo</span>: foo,
};

<span class="hljs-keyword">const</span> container2 = {};

container1.<span class="hljs-title function_">foo</span>(<span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container1.<span class="hljs-property">a</span>);
<span class="hljs-comment">// 2</span>

container1.<span class="hljs-property">foo</span>.<span class="hljs-title function_">call</span>(container2, <span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container2.<span class="hljs-property">a</span>);
<span class="hljs-comment">// 3</span>

<span class="hljs-keyword">var</span> bar = <span class="hljs-keyword">new</span> container1.<span class="hljs-title function_">foo</span>(<span class="hljs-number">4</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container1.<span class="hljs-property">a</span>);
<span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-property">a</span>);
<span class="hljs-comment">// 4</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ° <code>new</code> ç»‘å®šæ¯”éšå¼ç»‘å®šä¼˜å…ˆçº§é«˜ã€‚ä½†æ˜¯ <code>new</code> ç»‘å®šå’Œæ˜¾å¼ç»‘å®šè°çš„ä¼˜å…ˆçº§æ›´é«˜å‘¢ï¼Ÿ</p>
<p><code>new</code> å’Œ <code>call/apply</code> æ— æ³•ä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤æ— æ³•é€šè¿‡ <code>new foo.call(obj1)</code> æ¥ç›´æ¥è¿›è¡Œæµ‹è¯•ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¡¬ç»‘å®šæ¥æµ‹è¯•ä»–ä¿©çš„ä¼˜å…ˆçº§ã€‚</p>
<p>åœ¨çœ‹ä»£ç ä¹‹å‰å…ˆå›å¿†ä¸€ä¸‹ç¡¬ç»‘å®šæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚<code>Function.prototype.bind</code> ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…è£…å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šå¿½ç•¥å®ƒå½“å‰çš„ <code>this</code> ç»‘å®šï¼ˆæ— è®ºç»‘å®šçš„å¯¹è±¡æ˜¯ä»€ä¹ˆï¼‰ï¼Œå¹¶æŠŠæˆ‘ä»¬æä¾›çš„å¯¹è±¡ç»‘å®šåˆ° <code>this</code> ä¸Šã€‚</p>
<p>è¿™æ ·çœ‹èµ·æ¥ç¡¬ç»‘å®šï¼ˆä¹Ÿæ˜¯æ˜¾å¼ç»‘å®šçš„ä¸€ç§ï¼‰ä¼¼ä¹æ¯” <code>new</code> ç»‘å®šçš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œæ— æ³•ä½¿ç”¨ <code>new</code> æ¥æ§åˆ¶ <code>this</code> ç»‘å®šã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">something</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = something;
}

<span class="hljs-keyword">var</span> container1 = {};

<span class="hljs-keyword">var</span> bar = foo.<span class="hljs-title function_">bind</span>(container1);
<span class="hljs-title function_">bar</span>(<span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container1.<span class="hljs-property">a</span>);
<span class="hljs-comment">// 2</span>

<span class="hljs-keyword">var</span> baz = <span class="hljs-keyword">new</span> <span class="hljs-title function_">bar</span>(<span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container1.<span class="hljs-property">a</span>);
<span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(baz.<span class="hljs-property">a</span>);
<span class="hljs-comment">// 3</span>
</code></pre>
<h2>ç»‘å®šä¾‹å¤–</h2>
<h3>å¿½ç•¥æŒ‡å‘</h3>
<p>å¦‚æœå°† <code>null</code> æˆ– <code>undefined</code> ä½œä¸º <code>this</code> çš„ç»‘å®šå¯¹è±¡ä¼ å…¥ <code>call</code>ã€<code>apply</code> æˆ– <code>bind</code>ï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">const</span> a = <span class="hljs-number">2</span>;

foo.<span class="hljs-title function_">call</span>(<span class="hljs-literal">null</span>);
<span class="hljs-comment">// 2</span>
</code></pre>
<p>æ­¤ç±»å†™æ³•å¸¸ç”¨äº <code>apply</code> æ¥å±•å¼€æ•°ç»„ï¼Œå¹¶å½“ä½œå‚æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œç±»ä¼¼åœ°ï¼Œ<code>bind</code> å¯ä»¥å¯¹å‚æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–ï¼ˆé¢„å…ˆè®¾ç½®ä¸€äº›å‚æ•°ï¼‰ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;a:&#x27;</span> + a + <span class="hljs-string">&#x27;,b:&#x27;</span> + b);
}

<span class="hljs-comment">// æŠŠæ•°ç»„å±•å¼€æˆå‚æ•°</span>
foo.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
<span class="hljs-comment">// a:2, b:3</span>

<span class="hljs-comment">// ä½¿ç”¨ bind è¿›è¡ŒæŸ¯é‡ŒåŒ–</span>
<span class="hljs-keyword">var</span> bar = foo.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">2</span>);
<span class="hljs-title function_">bar</span>(<span class="hljs-number">3</span>);
<span class="hljs-comment">// a:2, b:3</span>
</code></pre>
<p>è¿™ä¸¤ç§æ–¹æ³•éƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•°å½“ä½œ <code>this</code> çš„ç»‘å®šå¯¹è±¡ã€‚å¦‚æœå‡½æ•°å¹¶ä¸å…³å¿ƒ <code>this</code> çš„è¯ï¼Œä½ 
ä»ç„¶éœ€è¦ä¼ å…¥ä¸€ä¸ªå ä½å€¼ï¼Œè¿™æ—¶ <code>null</code> å¯èƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<h3>è½¯ç»‘å®š</h3>
<p>ç¡¬ç»‘å®šè¿™ç§æ–¹å¼å¯ä»¥æŠŠ <code>this</code> å¼ºåˆ¶ç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡ï¼ˆé™¤äº†ä½¿ç”¨ <code>new</code> æ—¶ï¼‰ï¼Œé˜²æ­¢å‡½æ•°è°ƒç”¨åº”ç”¨é»˜è®¤ç»‘å®šè§„åˆ™ã€‚é—®é¢˜åœ¨äºï¼Œç¡¬ç»‘å®šä¼šå¤§å¤§é™ä½å‡½æ•°çš„çµæ´»æ€§ï¼Œä½¿ç”¨ç¡¬ç»‘å®šä¹‹åå°±æ— æ³•ä½¿ç”¨éšå¼ç»‘å®šæˆ–è€…æ˜¾å¼ç»‘å®šæ¥ä¿®æ”¹ <code>this</code>ã€‚</p>
<p>å¦‚æœå¯ä»¥ç»™é»˜è®¤ç»‘å®šæŒ‡å®šä¸€ä¸ªå…¨å±€å¯¹è±¡å’Œ <code>undefined</code> ä»¥å¤–çš„å€¼ï¼Œé‚£å°±å¯ä»¥å®ç°å’Œç¡¬ç»‘å®šç›¸åŒçš„æ•ˆæœï¼ŒåŒæ—¶ä¿ç•™éšå¼ç»‘å®šæˆ–è€…æ˜¾å¼ç»‘å®šä¿®æ”¹ <code>this</code> çš„èƒ½åŠ›ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">softBind</span>) { <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">softBind</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) {
<span class="hljs-keyword">var</span> fn = <span class="hljs-variable language_">this</span>;
<span class="hljs-comment">// æ•è·æ‰€æœ‰ curried å‚æ•°</span>
<span class="hljs-keyword">var</span> curried = [].<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>( <span class="hljs-variable language_">arguments</span>, <span class="hljs-number">1</span> ); <span class="hljs-keyword">var</span> bound = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
<span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(
(!<span class="hljs-variable language_">this</span> || <span class="hljs-variable language_">this</span> === (<span class="hljs-variable language_">window</span> || <span class="hljs-variable language_">global</span>)) ?
obj : <span class="hljs-variable language_">this</span>
curried.<span class="hljs-property">concat</span>.<span class="hljs-title function_">apply</span>( curried, <span class="hljs-variable language_">arguments</span> )
); };
             bound.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>( fn.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> );
<span class="hljs-keyword">return</span> bound; };
}
</code></pre>
<h3>æŒ‡å‘å˜æ›´</h3>
<p>å¦‚ä¸‹åˆ—å‡ºå››ç§æ–¹æ³•å¯ä»¥åœ¨ç¼–ç ä¸­æ”¹å˜ <code>this</code> æŒ‡å‘ã€‚</p>
<ul>
<li>ä½¿ç”¨ ES6 çš„ç®­å¤´å‡½æ•°</li>
<li>åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>_this = this</code></li>
<li>ä½¿ç”¨ <code>apply</code>ã€<code>call</code> å’Œ <code>bind</code></li>
<li><code>new</code> å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</li>
</ul>
<h3>ç®­å¤´å‡½æ•°</h3>
<p>ç®­å¤´å‡½æ•°å¹¶ä¸æ˜¯ä½¿ç”¨ <code>function</code> å…³é”®å­—å®šä¹‰çš„ï¼Œè€Œæ˜¯ä½¿ç”¨è¢«ç§°ä¸ºèƒ–ç®­å¤´çš„æ“ä½œç¬¦ <code>=&gt;</code> å®šä¹‰çš„ã€‚ç®­å¤´å‡½æ•°ä¸ä½¿ç”¨ <code>this</code> çš„å››ç§æ ‡å‡†è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚ï¼ˆå‡½æ•°æˆ–è€…å…¨å±€ï¼‰ä½œç”¨åŸŸæ¥å†³å®š <code>this</code> çš„æŒ‡å‘ã€‚å¹¶ä¸”ï¼Œç®­å¤´å‡½æ•°æ‹¥æœ‰é™æ€çš„ä¸Šä¸‹æ–‡ï¼Œå³ä¸€æ¬¡ç»‘å®šä¹‹åï¼Œä¾¿ä¸å¯å†ä¿®æ”¹ã€‚</p>
<p><code>this</code> æŒ‡å‘çš„å›ºå®šåŒ–ï¼Œå¹¶ä¸æ˜¯å› ä¸ºç®­å¤´å‡½æ•°å†…éƒ¨æœ‰ç»‘å®š <code>this</code> çš„æœºåˆ¶ï¼Œå®é™…åŸå› æ˜¯ç®­å¤´å‡½æ•°æ ¹æœ¬æ²¡æœ‰è‡ªå·±çš„ <code>this</code>ï¼Œå¯¼è‡´å†…éƒ¨çš„ <code>this</code> å°±æ˜¯å¤–å±‚ä»£ç å—çš„ <code>this</code>ã€‚æ­£æ˜¯å› ä¸ºå®ƒæ²¡æœ‰ <code>this</code>ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">a</span>) =&gt;</span> {
    <span class="hljs-comment">// this ç»§æ‰¿è‡ª foo()</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
  };
}
<span class="hljs-keyword">const</span> container1 = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> };

<span class="hljs-keyword">const</span> container2 = { <span class="hljs-attr">a</span>: <span class="hljs-number">2</span> };

<span class="hljs-keyword">const</span> bar = foo.<span class="hljs-title function_">call</span>(container1);

bar.<span class="hljs-title function_">call</span>(container2);
<span class="hljs-comment">// 1</span>
</code></pre>
<p><code>foo</code> å†…éƒ¨åˆ›å»ºçš„ç®­å¤´å‡½æ•°ä¼šæ•è·è°ƒç”¨æ—¶ <code>foo</code> çš„ <code>this</code>ã€‚ç”±äº <code>foo</code> çš„ <code>this</code> ç»‘å®šåˆ° <code>container1</code>ï¼Œ<code>bar</code>ï¼ˆå¼•ç”¨ç®­å¤´å‡½æ•°ï¼‰çš„ <code>this</code> ä¹Ÿä¼šç»‘å®šåˆ° <code>container1</code>ï¼Œç®­å¤´å‡½æ•°çš„ç»‘å®šæ— æ³•è¢«ä¿®æ”¹ã€‚</p>
<p>ç®­å¤´å‡½æ•°å¯ä»¥åƒ <code>bind</code> ä¸€æ ·ç¡®ä¿å‡½æ•°çš„ <code>this</code> è¢«ç»‘å®šåˆ°æŒ‡å®šå¯¹è±¡ï¼Œæ­¤å¤–ï¼Œå…¶é‡è¦æ€§è¿˜ä½“ç°åœ¨å®ƒç”¨æ›´å¸¸è§çš„è¯æ³•ä½œç”¨åŸŸå–ä»£äº†ä¼ ç»Ÿçš„ <code>this</code> æœºåˆ¶ã€‚å®é™…ä¸Šï¼Œåœ¨ ES6 ä¹‹å‰æˆ‘ä»¬å°±å·²ç»åœ¨ä½¿ç”¨ä¸€ç§å‡ ä¹å’Œç®­å¤´å‡½æ•°å®Œå…¨ä¸€æ ·çš„æ¨¡å¼ã€‚</p>
<p>è™½ç„¶ <code>const self = this</code> å’Œç®­å¤´å‡½æ•°çœ‹èµ·æ¥éƒ½å¯ä»¥å–ä»£ <code>bind</code>ï¼Œä½†æ˜¯ä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå®ƒä»¬æƒ³æ›¿ä»£çš„æ˜¯ <code>this</code> æœºåˆ¶ã€‚</p>
<p>å¦‚æœä½ ç»å¸¸ç¼–å†™ <code>this</code> é£æ ¼çš„ä»£ç ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†æ—¶å€™éƒ½ä¼šä½¿ç”¨ <code>const self = this</code> æˆ–è€…ç®­å¤´å‡½æ•°æ¥å¦å®š <code>this</code> æœºåˆ¶ï¼Œé‚£ä½ æˆ–è®¸åº”å½“:</p>
<ul>
<li>åªä½¿ç”¨è¯æ³•ä½œç”¨åŸŸå¹¶å®Œå…¨æŠ›å¼ƒé”™è¯¯ <code>this</code> é£æ ¼çš„ä»£ç </li>
<li>å®Œå…¨é‡‡ç”¨ <code>this</code> é£æ ¼ï¼Œåœ¨å¿…è¦æ—¶ä½¿ç”¨ <code>bind</code>ï¼Œå°½é‡é¿å…ä½¿ç”¨ <code>const self = this</code> å’Œç®­å¤´å‡½æ•°</li>
</ul>
<h2>åº”ç”¨åœºæ™¯æ€»ç»“</h2>
<ol>
<li>å‡½æ•°çš„æ™®é€šè°ƒç”¨</li>
<li>å‡½æ•°ä½œä¸ºå¯¹è±¡æ–¹æ³•è°ƒç”¨</li>
<li>å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨</li>
<li>å‡½æ•°é€šè¿‡ <code>call</code>ã€<code>apply</code>ã€<code>bind</code> é—´æ¥è°ƒç”¨</li>
<li>ç®­å¤´å‡½æ•°çš„è°ƒç”¨</li>
</ol>
<h2>å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/README" target="_blank" rel="noopener noreferrer nofollow">ğŸ“š ä½ ä¸çŸ¥é“çš„ JavaScriptï¼ˆä¸Šå·ï¼‰</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/23804247" target="_blank" rel="noopener noreferrer nofollow">ğŸ“ this çš„å€¼åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸€æ¬¡è¯´æ¸…æ¥š</a></li>
<li><a href="https://github.com/mqyqingfeng/Blog/issues/7" target="_blank" rel="noopener noreferrer nofollow">ğŸ“ JavaScript æ·±å…¥ä¹‹ä» ECMAScript è§„èŒƒè§£è¯» this</a></li>
<li><a href="https://github.com/logan70/Blog/issues/27" target="_blank" rel="noopener noreferrer nofollow">ä½œç”¨åŸŸä¸é—­åŒ… - this çš„åŸç†ä»¥åŠå‡ ç§ä¸åŒä½¿ç”¨åœºæ™¯çš„å–å€¼</a></li>
</ul>
4:["$","div",null,{"className":"markdown-body","children":["$","article",null,{"dangerouslySetInnerHTML":{"__html":"$c"}}]}]
a:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"front-end"}],["$","meta","2",{"name":"description","content":"front-end knowledge"}],["$","link","3",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
6:null
