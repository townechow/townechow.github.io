1:"$Sreact.fragment"
2:I[5244,[],""]
3:I[3866,[],""]
5:I[6213,[],"OutletBoundary"]
7:I[6213,[],"MetadataBoundary"]
9:I[6213,[],"ViewportBoundary"]
b:I[4835,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/ec0a9d078e716e00.css","style"]
:HL["/_next/static/css/485ff6fe79292a08.css","style"]
:HL["/_next/static/css/0ff121a467c0636f.css","style"]
0:{"P":null,"b":"P2aiewlOc1Z9OPuSRFf3D","p":"","c":["","front-end","browser-object-model","observer","mutation-observer"],"i":false,"f":[[["",{"children":["front-end",{"children":[["slug","browser-object-model/observer/mutation-observer","oc"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ec0a9d078e716e00.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":["$","body",null,{"className":"__variable_4d318d __variable_ea5f4b antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}],{"children":["front-end",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/485ff6fe79292a08.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/0ff121a467c0636f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","main",null,{"children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","front-end","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],{"children":[["slug","browser-object-model/observer/mutation-observer","oc"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","front-end","children","$0:f:0:1:2:children:2:children:0","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L4",null,["$","$L5",null,{"children":"$L6"}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","QASY9btMrVUO7XYwHBPsC",{"children":[["$","$L7",null,{"children":"$L8"}],["$","$L9",null,{"children":"$La"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}]]}],false]],"m":"$undefined","G":["$b","$undefined"],"s":false,"S":true}
c:T1b6c,<h1>MutationObserver API</h1>
<p>MutationObservr API ç”¨äºç›‘è§† DOM çš„ä»»ä½•å˜åŠ¨ï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„å¢å‡ã€å±æ€§çš„å˜åŠ¨ã€æ–‡æœ¬å†…å®¹çš„å˜åŠ¨ï¼Œè¿™ä¸ª API éƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥ã€‚</p>
<p>DOM å‘ç”Ÿå˜åŠ¨éƒ½ä¼šè§¦å‘ Mutation Observer äº‹ä»¶ã€‚ä½†æ˜¯ï¼Œå®ƒè·Ÿäº‹ä»¶è¿˜æ˜¯æœ‰ä¸åŒç‚¹ï¼šäº‹ä»¶æ˜¯åŒæ­¥è§¦å‘çš„ï¼ŒDOM å˜åŒ–ç«‹å³è§¦å‘ç›¸åº”çš„äº‹ä»¶ï¼›Mutation Observer æ˜¯ä¸€éƒ¨è§¦å‘ï¼ŒDOM å˜åŒ–ä¸ä¼šé©¬ä¸Šè§¦å‘ï¼Œè€Œæ˜¯ç­‰å½“å‰æ‰€æœ‰ DOM æ“ä½œéƒ½ç»“æŸåæ‰è§¦å‘ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å®ƒç­‰å¾…æ‰€æœ‰è„šæœ¬ä»»åŠ¡å®Œæˆåï¼Œæ‰ä¼šè¿è¡Œï¼ˆå³ä¸€æ­¥è§¦å‘æ–¹å¼ï¼‰</li>
<li>å®ƒæŠŠ DOM å˜åŠ¨è®°å½•å°è£…æˆä¸€ä¸ªæ•°ç»„è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯ä¸€æ¡æ¡ä¸ªåˆ«å¤„ç† DOM å˜åŠ¨</li>
<li>å®ƒæ—¢å¯ä»¥è§‚å¯Ÿ DOM çš„æ‰€æœ‰ç±»å‹å˜åŠ¨ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šåªè§‚å¯ŸæŸç±»å˜åŠ¨</li>
</ul>
<h2>æ¥å£å®šä¹‰</h2>
<pre class="hljs"><code class="language-ts"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">var</span> <span class="hljs-title class_">MutationObserver</span>: {
  <span class="hljs-title function_">new</span>(<span class="hljs-attr">callback</span>: <span class="hljs-title class_">Mutationcallback</span>): <span class="hljs-title class_">MutationObserver</span>;

  <span class="hljs-attr">prototype</span>: <span class="hljs-title class_">MutationObserver</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MutationObserver</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-title class_">MutationCallback</span> callback</span>);

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@param</span> target è¢«è§‚å¯Ÿçš„ DOM èŠ‚ç‚¹
   * <span class="hljs-doctag">@param</span> options é…ç½®å¯¹è±¡ï¼ˆæŒ‡å®šæ‰€è¦è§‚å¯Ÿç‰¹å¾ï¼‰
   */</span>
  <span class="hljs-title function_">observer</span>(<span class="hljs-attr">target</span>: <span class="hljs-title class_">Node</span>, <span class="hljs-attr">options</span>?: <span class="hljs-title class_">MutationObserverInit</span>): <span class="hljs-built_in">void</span>;

  <span class="hljs-title function_">disconnect</span>(): <span class="hljs-built_in">void</span>;

  <span class="hljs-title function_">takeRecords</span>(): <span class="hljs-title class_">MutationRecord</span>[];
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MutationObserverInit</span> {
  <span class="hljs-comment">/* è§‚å¯Ÿç‰¹å®šå±æ€§ */</span>
  <span class="hljs-attr">attributeFilter</span>?: <span class="hljs-built_in">string</span>[];
  <span class="hljs-comment">/* è§‚å¯Ÿ attributes å˜åŠ¨æ—¶ï¼Œæ˜¯å¦éœ€è¦è®°å½•å˜åŠ¨å‰çš„å±æ€§å€¼ */</span>
  <span class="hljs-attr">attributeOldValue</span>?: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-comment">/* å±æ€§çš„å˜åŠ¨*/</span>
  <span class="hljs-attr">attributes</span>?: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-comment">/* èŠ‚ç‚¹å†…å®¹æˆ–èŠ‚ç‚¹æ–‡æœ¬çš„å˜åŠ¨*/</span>
  <span class="hljs-attr">characterData</span>?: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-comment">/* è§‚å¯Ÿ characterData å˜åŠ¨ï¼Œæ˜¯å¦éœ€è¦è®°å½•å˜åŠ¨å‰çš„å€¼ */</span>
  <span class="hljs-attr">characterDataOldValue</span>?: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-comment">/* å­èŠ‚ç‚¹çš„å˜åŠ¨ï¼ˆæ–°å¢ã€åˆ é™¤æˆ–è€…æ›´æ”¹ï¼‰ */</span>
  <span class="hljs-attr">childList</span>?: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-comment">/* æ˜¯å¦å°†è§‚å¯Ÿå™¨åº”ç”¨äºè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹ */</span>
  <span class="hljs-attr">subtree</span>?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MutationRecord</span> {

}
</code></pre>
<h2>åº”ç”¨å®æˆ˜</h2>
<h3>åŸºæœ¬ç”¨æ³•</h3>
<pre class="hljs"><code class="language-js"><span class="hljs-comment">// è·å–éœ€è¦è§‚å¯Ÿå˜åŠ¨çš„å…ƒç´ èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;observer&#x27;</span>);

<span class="hljs-comment">// è§‚å¯Ÿå™¨çš„é…ç½®ï¼ˆéœ€è¦è§‚å¯Ÿä»€ä¹ˆå˜åŠ¨ï¼‰</span>
<span class="hljs-keyword">const</span> config = { <span class="hljs-attr">attributes</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span> };

<span class="hljs-comment">// å½“è§‚å¯Ÿåˆ°å˜åŠ¨æ—¶æ‰§è¡Œçš„å›è°ƒå‡½æ•°</span>
<span class="hljs-keyword">const</span> onMutationObserverChange = <span class="hljs-keyword">function</span>(<span class="hljs-params">mutationsList, observer</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> mutation <span class="hljs-keyword">of</span> mutationsList) {
    <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;childList&#x27;</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;A child node has been added or removed&#x27;</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;attributes&#x27;</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mutation.<span class="hljs-property">attributeName</span>);
    }
  }
};

<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿå™¨å®ä¾‹å¹¶ä¼ å…¥å›è°ƒå‡½æ•°</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(onMutationObserverChange);

<span class="hljs-comment">// ä»¥ä¸Šè¿°é…ç½®å¼€å§‹è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹</span>
observer.<span class="hljs-title function_">observe</span>(targetNode, config);

<span class="hljs-comment">// åœæ­¢è§‚å¯Ÿ</span>
observer.<span class="hljs-title function_">disconnect</span>();
</code></pre>
<h2>å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents">ğŸ“– W3C Mutation Events API Standard</a></li>
<li><a href="https://dom.spec.whatwg.org/#mutation-observers">ğŸ“– DOM Living Standard: Mutation observers</a></li>
<li><a href="https://microsoft.github.io/PowerBI-JavaScript/interfaces/_node_modules_typedoc_node_modules_typescript_lib_lib_dom_d_.mutationobserver.html">ğŸ“– TypeScript: Interface MutationObserver</a></li>
<li><a href="https://developers.google.com/web/updates/2012/02/Detect-DOM-changes-with-Mutation-Observers">ğŸ“ Detect DOM changes with Mutation Observers</a></li>
<li><a href="https://segmentfault.com/a/1190000019877595">ğŸ“ å¦‚ä½•ä¼˜é›…ç›‘å¬å®¹å™¨é«˜åº¦å˜åŒ–</a></li>
</ul>
4:["$","div",null,{"className":"markdown-body","children":[["$","h1",null,{"children":"MutationObserver API"}],["$","article",null,{"dangerouslySetInnerHTML":{"__html":"$c"}}]]}]
a:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"front-end"}],["$","meta","2",{"name":"description","content":"front-end knowledge"}],["$","link","3",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
6:null
