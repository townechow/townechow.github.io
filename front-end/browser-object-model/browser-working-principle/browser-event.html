<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/d498c84e4ab246b3.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/485ff6fe79292a08.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b9d97b2190475167.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/851cdee6d90716dd.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-78112f590b744806.js"/><script src="/_next/static/chunks/4bd1b696-20882bf820444624.js" async=""></script><script src="/_next/static/chunks/517-98ed787e5f259f2c.js" async=""></script><script src="/_next/static/chunks/main-app-f33d3e3aed85e21f.js" async=""></script><meta name="next-size-adjust" content=""/><title>front-end</title><meta name="description" content="front-end knowledge"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_4d318d __variable_ea5f4b antialiased"><main><div class="markdown-body"><article><h1>æµè§ˆå™¨äº‹ä»¶å¤„ç†</h1>
<h2>è¾“å…¥äº‹ä»¶</h2>
<p>å¬åˆ° <strong>è¾“å…¥äº‹ä»¶</strong> è¿™ä¸ªå­—çœ¼ï¼Œä½ è„‘æµ·é‡Œé—ªç°çš„ææ€•åªæ˜¯è¾“å…¥æ–‡æœ¬æˆ–ç‚¹å‡»é¼ æ ‡ã€‚ä½†åœ¨æµè§ˆå™¨çœ¼ä¸­ï¼Œè¾“å…¥æ„å‘³ç€ä¸€åˆ‡ç”¨æˆ·è¡Œä¸ºã€‚ä¸å•æ»šåŠ¨é¼ æ ‡æ»‘è½®æ˜¯è¾“å…¥äº‹ä»¶ï¼Œè§¦æ‘¸å±å¹•ã€æ»‘åŠ¨é¼ æ ‡åŒæ ·ä¹Ÿæ˜¯ç”¨æˆ·è¾“å…¥äº‹ä»¶ã€‚</p>
<p>è¯¸å¦‚è§¦æ‘¸å±å¹•ä¹‹ç±»ç”¨æˆ·æ‰‹åŠ¿äº§ç”Ÿæ—¶ï¼Œæµè§ˆå™¨è¿›ç¨‹ä¼šç‡å…ˆå°†å…¶æ•è·ã€‚ç„¶è€Œæµè§ˆå™¨è¿›ç¨‹æ‰€æŒæ¡çš„ä¿¡æ¯ä»…é™äºè¡Œä¸ºå‘ç”Ÿçš„åŒºåŸŸï¼Œå› ä¸ºæ ‡ç­¾é¡µé‡Œçš„å†…å®¹éƒ½ç”±æ¸²æŸ“è¿›ç¨‹è´Ÿè´£å¤„ç†ï¼Œæ‰€ä»¥æµè§ˆå™¨è¿›ç¨‹ä¼šå°†äº‹ä»¶ç±»å‹ï¼ˆå¦‚ touchstartï¼‰åŠå…¶åæ ‡å‘é€ç»™æ¸²æŸ“è¿›ç¨‹ã€‚æ¸²æŸ“è¿›ç¨‹ä¼šå¯»è‡³äº‹ä»¶ç›®æ ‡ï¼Œè¿è¡Œå…¶äº‹ä»¶ç›‘å¬å™¨ï¼Œå¦¥å–„åœ°å¤„ç†äº‹ä»¶ã€‚</p>
<img alt="è¾“å…¥äº‹ä»¶ç”±æµè§ˆå™¨è¿›ç¨‹å‘å¾€æ¸²æŸ“è¿›ç¨‹" src="../../assets/browser-working-principle/input-event-from-browser-to-renderer.png" width="520" /><h2>åˆæˆå™¨æ¥æ”¶è¾“å…¥äº‹ä»¶</h2>
<img alt="æ‚¬äºé¡µé¢å›¾å±‚çš„è§†å›¾çª—å£" src="../../assets/browser-working-principle/input-event-from-browser-to-renderer.png" width="520" /><p>åœ¨ä¸Šç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬æ¢è®¨äº†åˆæˆå™¨å¦‚ä½•é€šè¿‡åˆæˆæ …æ ¼åŒ–å›¾å±‚ï¼Œå®ç°æµç•…çš„é¡µé¢æ»šåŠ¨ã€‚å¦‚æœé¡µé¢ä¸Šæ²¡æœ‰æ·»åŠ ä»»ä½•äº‹ä»¶ç›‘å¬ï¼Œåˆæˆå™¨çº¿ç¨‹ä¼šåˆ›å»ºç‹¬ç«‹äºä¸»çº¿ç¨‹çš„æ–°åˆæˆå¸§ã€‚ä½†è¦æ˜¯é¡µé¢ä¸Šæ·»åŠ äº†äº‹ä»¶ç›‘å¬å‘¢ï¼Ÿåˆæˆå™¨çº¿ç¨‹åˆæ˜¯å¦‚ä½•å¾—çŸ¥äº‹ä»¶æ˜¯å¦éœ€è¦å¤„ç†çš„ï¼Ÿ</p>
<h2>ç†è§£éç«‹å³å¯æ»šåŠ¨åŒº</h2>
<p>å› ä¸ºè¿è¡Œ JavaScript è„šæœ¬æ˜¯ä¸»çº¿ç¨‹çš„å·¥ä½œï¼Œæ‰€ä»¥é¡µé¢åˆæˆåï¼Œåˆæˆè¿›ç¨‹ä¼šå°†é¡µé¢é‡Œæ·»åŠ äº†äº‹ä»¶ç›‘å¬çš„åŒºåŸŸæ ‡è®°ä¸º <strong>éç«‹å³å¯æ»šåŠ¨åŒº</strong>ã€‚æœ‰äº†è¿™ä¸ªä¿¡æ¯ï¼Œå¦‚æœè¾“å…¥äº‹ä»¶å‘ç”Ÿåœ¨è¿™ä¸€åŒºåŸŸï¼Œåˆæˆè¿›ç¨‹å¯ä»¥ç¡®å®šåº”å°†å…¶å‘å¾€ä¸»çº¿ç¨‹å¤„ç†ã€‚å¦‚è¾“å…¥äº‹ä»¶å‘ç”Ÿåœ¨è¿™ä¸€åŒºåŸŸä¹‹å¤–ï¼Œåˆæˆè¿›ç¨‹åˆ™ç¡®å®šæ— éœ€ç­‰å¾…ä¸»çº¿ç¨‹ï¼Œå¯ç»§ç»­åˆæˆæ–°å¸§ã€‚</p>
<img alt="éç«‹å³å¯æ»šåŠ¨åŒºè¾“å…¥æè¿°ç¤ºæ„å›¾" src="../../assets/browser-working-principle/non-fast-scrollable-region.png" width="520" /><h3>è®¾ç½®äº‹ä»¶å¤„ç†å™¨æ—¶é¡»æ³¨æ„</h3>
<p>Web å¼€å‘ä¸­å¸¸ç”¨çš„äº‹ä»¶å¤„ç†æ¨¡å¼æ˜¯ <strong>äº‹ä»¶ä»£ç†</strong>ã€‚å› ä¸ºäº‹ä»¶ä¼šå†’æ³¡ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨æœ€é¡¶å±‚çš„å…ƒç´ ä¸­æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨ï¼Œç”¨æ¥ä»£ç†äº‹ä»¶ç›®æ ‡äº§ç”Ÿçš„ä»»åŠ¡ã€‚ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼Œä½ å¯èƒ½è§è¿‡ï¼Œæˆ–è®¸ä¹Ÿå†™è¿‡ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;touchstart&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span> === area) {
    event.<span class="hljs-title function_">preventDefault</span>();
  }
});
</code></pre>
<p>è¿™æ ·åªéœ€æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå³å¯ç›‘å¬æ‰€æœ‰å…ƒç´ ï¼Œçš„ç¡®ååˆ†çœäº‹ã€‚ç„¶è€Œï¼Œå¦‚æœç«™åœ¨æµè§ˆå™¨çš„è§’åº¦å»è€ƒé‡ï¼Œè¿™ç­‰äºæŠŠæ•´ä¸ªé¡µé¢éƒ½æ ‡è®°æˆäº† <strong>éç«‹å³å¯æ»šåŠ¨åŒº</strong>ï¼Œæ„å‘³ç€å³ä¾¿ä½ è®¾è®¡çš„åº”ç”¨æœ¬ä¸å¿…ç†ä¼šé¡µé¢ä¸Šä¸€äº›åŒºåŸŸçš„è¾“å…¥è¡Œä¸ºï¼Œåˆæˆçº¿ç¨‹ä¹Ÿå¿…é¡»åœ¨æ¯æ¬¡è¾“å…¥äº‹ä»¶äº§ç”Ÿåä¸ä¸»çº¿ç¨‹é€šä¿¡å¹¶ç­‰å¾…è¿”å›ã€‚å¦‚æ­¤åˆ™å¾—ä¸å¿å¤±ï¼Œä½¿åŸæœ¬èƒ½ä¿éšœé¡µé¢æ»šåŠ¨æµç•…çš„åˆæˆå™¨æ²¡äº†ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>ä½ å¯ä»¥ç»™äº‹ä»¶ç›‘å¬æ·»åŠ ä¸€ä¸ª <code>passive: true</code> é€‰é¡¹ ï¼Œå°†è¿™ç§è´Ÿé¢æ•ˆæœæœ€å°åŒ–ã€‚è¿™ä¼šæç¤ºæµè§ˆå™¨ä½ æƒ³ç»§ç»­åœ¨ä¸»çº¿ç¨‹ä¸­ç›‘å¬äº‹ä»¶ï¼Œä½†åˆæˆå™¨ä¸å¿…åœæ»ç­‰å€™ï¼Œå¯æ¥ç€åˆ›å»ºæ–°çš„åˆæˆå¸§ã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">addEventListener</span>(
  <span class="hljs-string">&#x27;touchstart&#x27;</span>,
  <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span> === area) {
      event.<span class="hljs-title function_">preventDefault</span>();
    }
  },
  {
    <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span>,
  }
);
</code></pre>
<h2>æ£€æŸ¥äº‹ä»¶æ˜¯å¦å¯æ’¤é”€</h2>
<img alt="éƒ¨åˆ†åŒºåŸŸä»…å¯æ°´å¹³æ–¹å‘æ»šåŠ¨çš„ç½‘é¡µ" src="../../assets/browser-working-principle/horizontally-scrollable-website.png" width="520" /><p>è®¾æƒ³ä¸€ä¸‹è¿™ç§æƒ…å½¢ï¼šé¡µé¢ä¸Šæœ‰ä¸€ä¸ªç›’å­ï¼Œä½ è¦å°†å…¶æ»šåŠ¨æ–¹å‘é™åˆ¶ä¸ºæ°´å¹³æ»šåŠ¨ã€‚</p>
<p>ä¸ºç›®æ ‡äº‹ä»¶è®¾ç½® <code>passive: true</code> é€‰é¡¹å¯è®©é¡µé¢æ»šåŠ¨å¹³æ»‘ï¼Œä½†åœ¨ä½ ä½¿ç”¨ <code>preventDefault</code> ä»¥é™åˆ¶æ»šåŠ¨æ–¹å‘æ—¶ï¼Œå‚ç›´æ–¹å‘æ»šåŠ¨å¯èƒ½å·²ç»è§¦å‘ã€‚ä½¿ç”¨ <code>event.cancelable</code> å¯ä»¥æ£€æŸ¥å¹¶é˜»æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;pointermove&#x27;</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">cancelable</span>) {
    event.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢é»˜è®¤çš„æ»šåŠ¨è¡Œä¸º</span>
    <span class="hljs-comment">/*
    *  è¿™é‡Œè®¾ç½®ç¨‹åºæ‰§è¡Œä»»åŠ¡
    */</span>
  }
}, {<span class="hljs-attr">passive</span>:: <span class="hljs-literal">true</span>});
</code></pre>
<p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥åº”ç”¨ <code>touch-action</code> è¿™ç±» CSS è§„åˆ™ï¼Œå®Œå…¨åœ°å°†äº‹ä»¶å¤„ç†å™¨å±è”½æ‰ã€‚</p>
<pre class="hljs language-css"  style=--lang:"css" ><code><span class="hljs-selector-id">#area</span> {
  <span class="hljs-attribute">touch-action</span>: pan-x;
}
</code></pre>
<h2>å®šä½äº‹ä»¶ç›®æ ‡</h2>
<img alt="ä¸»çº¿ç¨‹æ£€æŸ¥ç»˜åˆ¶è®°å½•æŸ¥è¯¢åæ ‡Xå’ŒYå¤„ç»˜åˆ¶å†…å®¹" src="../../assets/browser-working-principle/main-process-check-paint-record.png" width="520" /><p>åˆæˆå™¨å°†è¾“å…¥äº‹ä»¶å‘é€è‡³ä¸»çº¿ç¨‹åï¼Œé¦–å…ˆè¿è¡Œçš„æ˜¯å‘½ä¸­æ£€æµ‹ã€‚å‘½ä¸­æ£€æµ‹ä¼šä½¿ç”¨æ¸²æŸ“è¿›ç¨‹ä¸­äº§ç”Ÿçš„ç»˜åˆ¶è®°å½•æ•°æ®ï¼Œæ‰¾å‡ºäº‹ä»¶å‘ç”Ÿåæ ‡ä¸‹çš„å†…å®¹ã€‚</p>
<h2>é™ä½å¾€ä¸»çº¿ç¨‹å‘é€äº‹ä»¶çš„é¢‘ç‡</h2>
<p>ä¹‹å‰çš„æ–‡ç« é‡Œï¼Œæˆ‘ä»¬æ¢è®¨äº†å¸¸è§æ˜¾ç¤ºå±å¦‚ä½•ä»¥æ¯ç§’ 60 å¸§çš„é¢‘ç‡åˆ·æ–°ï¼Œä»¥åŠæˆ‘ä»¬è¦æ€æ ·ä¸å…¶åˆ·æ–°é¢‘ç‡ä¿æŒæ­¥è°ƒä¸€è‡´ï¼Œä»¥è¥é€ å‡ºæµç•…çš„åŠ¨ç”»æ•ˆæœã€‚è€Œå¯¹äºç”¨æˆ·çš„è¾“å…¥è¡Œä¸ºï¼Œå¸¸è§è§¦æ‘¸å±è®¾å¤‡çš„äº‹ä»¶ä¼ è¾“é¢‘ç‡ä¸ºæ¯ç§’ 60~120 æ¬¡ï¼Œå¸¸è§é¼ æ ‡è®¾å¤‡çš„äº‹ä»¶ä¼ è¾“é¢‘ç‡ä¸ºæ¯ç§’ 100 æ¬¡ã€‚å¯è§ï¼Œè¾“å…¥äº‹ä»¶æœ‰ç€æ¯”æ˜¾ç¤ºå±å¹•æ›´é«˜çš„ä¿çœŸåº¦ã€‚</p>
<p>å¦‚æœä¸€è¿ä¸² <code>touchmove</code> è¿™æ ·çš„äº‹ä»¶ä»¥æ¯ç§’ 120 æ¬¡çš„é¢‘ç‡å‘é€å¾€ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè§¦å‘è¿‡é‡çš„å‘½ä¸­æ£€æµ‹åŠ JavaScript è„šæœ¬æ‰§è¡Œã€‚ç›¸å½¢è€Œè¨€ï¼Œæˆ‘ä»¬çš„å±å¹•åˆ·æ–°ç‡åˆ™ä½ä¸‹å¾—å¤šã€‚</p>
<img alt="å¤§é‡äº‹ä»¶æ¶Œå…¥åˆæˆå¸§æ—¶é—´è½´ä¼šé€ æˆé¡µé¢é—ªçƒ" src="../../assets/browser-working-principle/massive-event-and-website-flicker.png" width="640" /><p>ä¸ºäº†é™ä½å¾€ä¸»çº¿ç¨‹ä¸­ä¼ é€’è¿‡é‡è°ƒç”¨ï¼ŒChrome ä¼šåˆå¹¶è¿™äº›è¿ç»­äº‹ä»¶ï¼ˆå¦‚ï¼š<code>wheel</code>ã€<code>mousewheel</code>ã€<code>mousemove</code>ã€<code>pointermove</code>ã€<code>touchmove</code> ç­‰ï¼‰ï¼Œå¹¶å°†å…¶å»¶è¿Ÿè‡³ä¸‹ä¸€æ¬¡ <code>requestAnimationFrame</code> å‰å‘é€ã€‚</p>
<img alt="ç›¸åŒçš„æ—¶é—´è½´ä¸‹äº‹ä»¶è¢«åˆå¹¶ä¸”å»¶è¿Ÿå‘é€" src="../../assets/browser-working-principle/same-timeline-composite-event.png" width="640" /><p>æ‰€æœ‰ç‹¬ç«‹çš„äº‹ä»¶ï¼Œå¦‚: <code>keydown</code>ã€<code>keyup</code>ã€<code>mouseup</code>ã€<code>mousedown</code>ã€<code>touchstart</code> åŠ <code>touchend</code> åˆ™ä¼šç«‹å³å‘å¾€ä¸»çº¿ç¨‹ã€‚</p>
<h2>å¸§å†…äº‹ä»¶</h2>
<p>äº‹ä»¶åˆå¹¶å¯å¸®åŠ©å¤§å¤šæ•° Web åº”ç”¨æ„å»ºè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ç„¶è€Œï¼Œå¦‚æœä½ å¼€å‘çš„æ˜¯ä¸€ä¸ªç»˜å›¾ç±»åº”ç”¨ï¼Œéœ€è¦åŸºäº <code>touchmove</code> äº‹ä»¶çš„åæ ‡ç»˜åˆ¶çº¿è·¯ï¼Œé‚£ä¹ˆåœ¨ä½ è¯•å›¾ç”»ä¸‹ä¸€æ ¹å…‰æ»‘çš„çº¿æ¡æ—¶ï¼ŒåŒºé—´å†…çš„ä¸€äº›åæ ‡ç‚¹ä¹Ÿå¯èƒ½ä¼šå› äº‹ä»¶åˆå¹¶è€Œä¸¢å¤±ã€‚è¿™æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ç›®æ ‡äº‹ä»¶çš„ <code>getCoalescedEvents</code> æ–¹æ³•è·å–äº‹ä»¶åˆå¹¶åçš„ä¿¡æ¯ã€‚</p>
<img alt="å·¦ä¸ºæµç•…çš„è§¦æ‘¸æ‰‹åŠ¿è·¯å¾„ã€å³ä¸ºäº‹ä»¶åˆå¹¶åçš„æœ‰é™è·¯å¾„" src="../../assets/browser-working-principle/touch-gesture-and-coalesced-event.png" width="520" /><p>&lt;br /&gt;</p>
<pre class="hljs language-js"  style=--lang:"js" ><code><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;pointermove&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> events = event.<span class="hljs-title function_">getCoalescedEvents</span>();
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> event <span class="hljs-keyword">of</span> events) {
    <span class="hljs-keyword">const</span> x = event.<span class="hljs-property">pageX</span>;
    <span class="hljs-keyword">const</span> y = event.<span class="hljs-property">pageY</span>;
    <span class="hljs-comment">// ä½¿ç”¨ xã€y åæ ‡ç”»çº¿</span>
  }
});
</code></pre>
<h2>å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://developers.google.com/web/updates/2018/09/inside-browser-part4" target="_blank" rel="noopener noreferrer nofollow">ğŸ“ è‹±è¯­åŸæ–‡ï¼šInside look at modern web browserï¼ˆPart 4ï¼‰</a></li>
<li><a href="https://juejin.im/post/6844903695600058375" target="_blank" rel="noopener noreferrer nofollow">ğŸ“ ç°ä»£æµè§ˆå™¨å†…éƒ¨æ­ç§˜ï¼ˆPart 4ï¼‰</a></li>
</ul>
</article></div></main><script src="/_next/static/chunks/webpack-78112f590b744806.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[5244,[],\"\"]\n3:I[3866,[],\"\"]\n5:I[6213,[],\"OutletBoundary\"]\n7:I[6213,[],\"MetadataBoundary\"]\n9:I[6213,[],\"ViewportBoundary\"]\nb:I[4835,[],\"\"]\n:HL[\"/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/d498c84e4ab246b3.css\",\"style\"]\n:HL[\"/_next/static/css/485ff6fe79292a08.css\",\"style\"]\n:HL[\"/_next/static/css/b9d97b2190475167.css\",\"style\"]\n:HL[\"/_next/static/css/851cdee6d90716dd.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"NFjmtHF2up8B2PpbDjLiS\",\"p\":\"\",\"c\":[\"\",\"front-end\",\"browser-object-model\",\"browser-working-principle\",\"browser-event\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"front-end\",{\"children\":[[\"slug\",\"browser-object-model/browser-working-principle/browser-event\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d498c84e4ab246b3.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/485ff6fe79292a08.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b9d97b2190475167.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_4d318d __variable_ea5f4b antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[\"front-end\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/851cdee6d90716dd.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"main\",null,{\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"front-end\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}],{\"children\":[[\"slug\",\"browser-object-model/browser-working-principle/browser-event\",\"oc\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"front-end\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L4\",null,[\"$\",\"$L5\",null,{\"children\":\"$L6\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"zEegiotaJvKHcBHYNoHrn\",{\"children\":[[\"$\",\"$L7\",null,{\"children\":\"$L8\"}],[\"$\",\"$L9\",null,{\"children\":\"$La\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$b\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:T2620,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eæµè§ˆå™¨äº‹ä»¶å¤„ç†\u003c/h1\u003e\n\u003ch2\u003eè¾“å…¥äº‹ä»¶\u003c/h2\u003e\n\u003cp\u003eå¬åˆ° \u003cstrong\u003eè¾“å…¥äº‹ä»¶\u003c/strong\u003e è¿™ä¸ªå­—çœ¼ï¼Œä½ è„‘æµ·é‡Œé—ªç°çš„ææ€•åªæ˜¯è¾“å…¥æ–‡æœ¬æˆ–ç‚¹å‡»é¼ æ ‡ã€‚ä½†åœ¨æµè§ˆå™¨çœ¼ä¸­ï¼Œè¾“å…¥æ„å‘³ç€ä¸€åˆ‡ç”¨æˆ·è¡Œä¸ºã€‚ä¸å•æ»šåŠ¨é¼ æ ‡æ»‘è½®æ˜¯è¾“å…¥äº‹ä»¶ï¼Œè§¦æ‘¸å±å¹•ã€æ»‘åŠ¨é¼ æ ‡åŒæ ·ä¹Ÿæ˜¯ç”¨æˆ·è¾“å…¥äº‹ä»¶ã€‚\u003c/p\u003e\n\u003cp\u003eè¯¸å¦‚è§¦æ‘¸å±å¹•ä¹‹ç±»ç”¨æˆ·æ‰‹åŠ¿äº§ç”Ÿæ—¶ï¼Œæµè§ˆå™¨è¿›ç¨‹ä¼šç‡å…ˆå°†å…¶æ•è·ã€‚ç„¶è€Œæµè§ˆå™¨è¿›ç¨‹æ‰€æŒæ¡çš„ä¿¡æ¯ä»…é™äºè¡Œä¸ºå‘ç”Ÿçš„åŒºåŸŸï¼Œå› ä¸ºæ ‡ç­¾é¡µé‡Œçš„å†…å®¹éƒ½ç”±æ¸²æŸ“è¿›ç¨‹è´Ÿè´£å¤„ç†ï¼Œæ‰€ä»¥æµè§ˆå™¨è¿›ç¨‹ä¼šå°†äº‹ä»¶ç±»å‹ï¼ˆå¦‚ touchstartï¼‰åŠå…¶åæ ‡å‘é€ç»™æ¸²æŸ“è¿›ç¨‹ã€‚æ¸²æŸ“è¿›ç¨‹ä¼šå¯»è‡³äº‹ä»¶ç›®æ ‡ï¼Œè¿è¡Œå…¶äº‹ä»¶ç›‘å¬å™¨ï¼Œå¦¥å–„åœ°å¤„ç†äº‹ä»¶ã€‚\u003c/p\u003e\n\u003cimg alt=\"è¾“å…¥äº‹ä»¶ç”±æµè§ˆå™¨è¿›ç¨‹å‘å¾€æ¸²æŸ“è¿›ç¨‹\" src=\"../../assets/browser-working-principle/input-event-from-browser-to-renderer.png\" width=\"520\" /\u003e\u003ch2\u003eåˆæˆå™¨æ¥æ”¶è¾“å…¥äº‹ä»¶\u003c/h2\u003e\n\u003cimg alt=\"æ‚¬äºé¡µé¢å›¾å±‚çš„è§†å›¾çª—å£\" src=\"../../assets/browser-working-principle/input-event-from-browser-to-renderer.png\" width=\"520\" /\u003e\u003cp\u003eåœ¨ä¸Šç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬æ¢è®¨äº†åˆæˆå™¨å¦‚ä½•é€šè¿‡åˆæˆæ …æ ¼åŒ–å›¾å±‚ï¼Œå®ç°æµç•…çš„é¡µé¢æ»šåŠ¨ã€‚å¦‚æœé¡µé¢ä¸Šæ²¡æœ‰æ·»åŠ ä»»ä½•äº‹ä»¶ç›‘å¬ï¼Œåˆæˆå™¨çº¿ç¨‹ä¼šåˆ›å»ºç‹¬ç«‹äºä¸»çº¿ç¨‹çš„æ–°åˆæˆå¸§ã€‚ä½†è¦æ˜¯é¡µé¢ä¸Šæ·»åŠ äº†äº‹ä»¶ç›‘å¬å‘¢ï¼Ÿåˆæˆå™¨çº¿ç¨‹åˆæ˜¯å¦‚ä½•å¾—çŸ¥äº‹ä»¶æ˜¯å¦éœ€è¦å¤„ç†çš„ï¼Ÿ\u003c/p\u003e\n\u003ch2\u003eç†è§£éç«‹å³å¯æ»šåŠ¨åŒº\u003c/h2\u003e\n\u003cp\u003eå› ä¸ºè¿è¡Œ JavaScript è„šæœ¬æ˜¯ä¸»çº¿ç¨‹çš„å·¥ä½œï¼Œæ‰€ä»¥é¡µé¢åˆæˆåï¼Œåˆæˆè¿›ç¨‹ä¼šå°†é¡µé¢é‡Œæ·»åŠ äº†äº‹ä»¶ç›‘å¬çš„åŒºåŸŸæ ‡è®°ä¸º \u003cstrong\u003eéç«‹å³å¯æ»šåŠ¨åŒº\u003c/strong\u003eã€‚æœ‰äº†è¿™ä¸ªä¿¡æ¯ï¼Œå¦‚æœè¾“å…¥äº‹ä»¶å‘ç”Ÿåœ¨è¿™ä¸€åŒºåŸŸï¼Œåˆæˆè¿›ç¨‹å¯ä»¥ç¡®å®šåº”å°†å…¶å‘å¾€ä¸»çº¿ç¨‹å¤„ç†ã€‚å¦‚è¾“å…¥äº‹ä»¶å‘ç”Ÿåœ¨è¿™ä¸€åŒºåŸŸä¹‹å¤–ï¼Œåˆæˆè¿›ç¨‹åˆ™ç¡®å®šæ— éœ€ç­‰å¾…ä¸»çº¿ç¨‹ï¼Œå¯ç»§ç»­åˆæˆæ–°å¸§ã€‚\u003c/p\u003e\n\u003cimg alt=\"éç«‹å³å¯æ»šåŠ¨åŒºè¾“å…¥æè¿°ç¤ºæ„å›¾\" src=\"../../assets/browser-working-principle/non-fast-scrollable-region.png\" width=\"520\" /\u003e\u003ch3\u003eè®¾ç½®äº‹ä»¶å¤„ç†å™¨æ—¶é¡»æ³¨æ„\u003c/h3\u003e\n\u003cp\u003eWeb å¼€å‘ä¸­å¸¸ç”¨çš„äº‹ä»¶å¤„ç†æ¨¡å¼æ˜¯ \u003cstrong\u003eäº‹ä»¶ä»£ç†\u003c/strong\u003eã€‚å› ä¸ºäº‹ä»¶ä¼šå†’æ³¡ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨æœ€é¡¶å±‚çš„å…ƒç´ ä¸­æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨ï¼Œç”¨æ¥ä»£ç†äº‹ä»¶ç›®æ ‡äº§ç”Ÿçš„ä»»åŠ¡ã€‚ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼Œä½ å¯èƒ½è§è¿‡ï¼Œæˆ–è®¸ä¹Ÿå†™è¿‡ã€‚\u003c/p\u003e\n\u003cpre class=\"hljs language-js\"  style=--lang:\"js\" \u003e\u003ccode\u003e\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;touchstart\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eevent\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (event.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e === area) {\n    event.\u003cspan class=\"hljs-title function_\"\u003epreventDefault\u003c/span\u003e();\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eè¿™æ ·åªéœ€æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå³å¯ç›‘å¬æ‰€æœ‰å…ƒç´ ï¼Œçš„ç¡®ååˆ†çœäº‹ã€‚ç„¶è€Œï¼Œå¦‚æœç«™åœ¨æµè§ˆå™¨çš„è§’åº¦å»è€ƒé‡ï¼Œè¿™ç­‰äºæŠŠæ•´ä¸ªé¡µé¢éƒ½æ ‡è®°æˆäº† \u003cstrong\u003eéç«‹å³å¯æ»šåŠ¨åŒº\u003c/strong\u003eï¼Œæ„å‘³ç€å³ä¾¿ä½ è®¾è®¡çš„åº”ç”¨æœ¬ä¸å¿…ç†ä¼šé¡µé¢ä¸Šä¸€äº›åŒºåŸŸçš„è¾“å…¥è¡Œä¸ºï¼Œåˆæˆçº¿ç¨‹ä¹Ÿå¿…é¡»åœ¨æ¯æ¬¡è¾“å…¥äº‹ä»¶äº§ç”Ÿåä¸ä¸»çº¿ç¨‹é€šä¿¡å¹¶ç­‰å¾…è¿”å›ã€‚å¦‚æ­¤åˆ™å¾—ä¸å¿å¤±ï¼Œä½¿åŸæœ¬èƒ½ä¿éšœé¡µé¢æ»šåŠ¨æµç•…çš„åˆæˆå™¨æ²¡äº†ç”¨æ­¦ä¹‹åœ°ã€‚\u003c/p\u003e\n\u003cp\u003eä½ å¯ä»¥ç»™äº‹ä»¶ç›‘å¬æ·»åŠ ä¸€ä¸ª \u003ccode\u003epassive: true\u003c/code\u003e é€‰é¡¹ ï¼Œå°†è¿™ç§è´Ÿé¢æ•ˆæœæœ€å°åŒ–ã€‚è¿™ä¼šæç¤ºæµè§ˆå™¨ä½ æƒ³ç»§ç»­åœ¨ä¸»çº¿ç¨‹ä¸­ç›‘å¬äº‹ä»¶ï¼Œä½†åˆæˆå™¨ä¸å¿…åœæ»ç­‰å€™ï¼Œå¯æ¥ç€åˆ›å»ºæ–°çš„åˆæˆå¸§ã€‚\u003c/p\u003e\n\u003cpre class=\"hljs language-js\"  style=--lang:\"js\" \u003e\u003ccode\u003e\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\u0026#x27;touchstart\u0026#x27;\u003c/span\u003e,\n  \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eevent\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (event.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e === area) {\n      event.\u003cspan class=\"hljs-title function_\"\u003epreventDefault\u003c/span\u003e();\n    }\n  },\n  {\n    \u003cspan class=\"hljs-attr\"\u003epassive\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  }\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eæ£€æŸ¥äº‹ä»¶æ˜¯å¦å¯æ’¤é”€\u003c/h2\u003e\n\u003cimg alt=\"éƒ¨åˆ†åŒºåŸŸä»…å¯æ°´å¹³æ–¹å‘æ»šåŠ¨çš„ç½‘é¡µ\" src=\"../../assets/browser-working-principle/horizontally-scrollable-website.png\" width=\"520\" /\u003e\u003cp\u003eè®¾æƒ³ä¸€ä¸‹è¿™ç§æƒ…å½¢ï¼šé¡µé¢ä¸Šæœ‰ä¸€ä¸ªç›’å­ï¼Œä½ è¦å°†å…¶æ»šåŠ¨æ–¹å‘é™åˆ¶ä¸ºæ°´å¹³æ»šåŠ¨ã€‚\u003c/p\u003e\n\u003cp\u003eä¸ºç›®æ ‡äº‹ä»¶è®¾ç½® \u003ccode\u003epassive: true\u003c/code\u003e é€‰é¡¹å¯è®©é¡µé¢æ»šåŠ¨å¹³æ»‘ï¼Œä½†åœ¨ä½ ä½¿ç”¨ \u003ccode\u003epreventDefault\u003c/code\u003e ä»¥é™åˆ¶æ»šåŠ¨æ–¹å‘æ—¶ï¼Œå‚ç›´æ–¹å‘æ»šåŠ¨å¯èƒ½å·²ç»è§¦å‘ã€‚ä½¿ç”¨ \u003ccode\u003eevent.cancelable\u003c/code\u003e å¯ä»¥æ£€æŸ¥å¹¶é˜»æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚\u003c/p\u003e\n\u003cpre class=\"hljs language-js\"  style=--lang:\"js\" \u003e\u003ccode\u003e\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;pointermove\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eevent\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (event.\u003cspan class=\"hljs-property\"\u003ecancelable\u003c/span\u003e) {\n    event.\u003cspan class=\"hljs-title function_\"\u003epreventDefault\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// é˜»æ­¢é»˜è®¤çš„æ»šåŠ¨è¡Œä¸º\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e/*\n    *  è¿™é‡Œè®¾ç½®ç¨‹åºæ‰§è¡Œä»»åŠ¡\n    */\u003c/span\u003e\n  }\n}, {\u003cspan class=\"hljs-attr\"\u003epassive\u003c/span\u003e:: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥åº”ç”¨ \u003ccode\u003etouch-action\u003c/code\u003e è¿™ç±» CSS è§„åˆ™ï¼Œå®Œå…¨åœ°å°†äº‹ä»¶å¤„ç†å™¨å±è”½æ‰ã€‚\u003c/p\u003e\n\u003cpre class=\"hljs language-css\"  style=--lang:\"css\" \u003e\u003ccode\u003e\u003cspan class=\"hljs-selector-id\"\u003e#area\u003c/span\u003e {\n  \u003cspan class=\"hljs-attribute\"\u003etouch-action\u003c/span\u003e: pan-x;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eå®šä½äº‹ä»¶ç›®æ ‡\u003c/h2\u003e\n\u003cimg alt=\"ä¸»çº¿ç¨‹æ£€æŸ¥ç»˜åˆ¶è®°å½•æŸ¥è¯¢åæ ‡Xå’ŒYå¤„ç»˜åˆ¶å†…å®¹\" src=\"../../assets/browser-working-principle/main-process-check-paint-record.png\" width=\"520\" /\u003e\u003cp\u003eåˆæˆå™¨å°†è¾“å…¥äº‹ä»¶å‘é€è‡³ä¸»çº¿ç¨‹åï¼Œé¦–å…ˆè¿è¡Œçš„æ˜¯å‘½ä¸­æ£€æµ‹ã€‚å‘½ä¸­æ£€æµ‹ä¼šä½¿ç”¨æ¸²æŸ“è¿›ç¨‹ä¸­äº§ç”Ÿçš„ç»˜åˆ¶è®°å½•æ•°æ®ï¼Œæ‰¾å‡ºäº‹ä»¶å‘ç”Ÿåæ ‡ä¸‹çš„å†…å®¹ã€‚\u003c/p\u003e\n\u003ch2\u003eé™ä½å¾€ä¸»çº¿ç¨‹å‘é€äº‹ä»¶çš„é¢‘ç‡\u003c/h2\u003e\n\u003cp\u003eä¹‹å‰çš„æ–‡ç« é‡Œï¼Œæˆ‘ä»¬æ¢è®¨äº†å¸¸è§æ˜¾ç¤ºå±å¦‚ä½•ä»¥æ¯ç§’ 60 å¸§çš„é¢‘ç‡åˆ·æ–°ï¼Œä»¥åŠæˆ‘ä»¬è¦æ€æ ·ä¸å…¶åˆ·æ–°é¢‘ç‡ä¿æŒæ­¥è°ƒä¸€è‡´ï¼Œä»¥è¥é€ å‡ºæµç•…çš„åŠ¨ç”»æ•ˆæœã€‚è€Œå¯¹äºç”¨æˆ·çš„è¾“å…¥è¡Œä¸ºï¼Œå¸¸è§è§¦æ‘¸å±è®¾å¤‡çš„äº‹ä»¶ä¼ è¾“é¢‘ç‡ä¸ºæ¯ç§’ 60~120 æ¬¡ï¼Œå¸¸è§é¼ æ ‡è®¾å¤‡çš„äº‹ä»¶ä¼ è¾“é¢‘ç‡ä¸ºæ¯ç§’ 100 æ¬¡ã€‚å¯è§ï¼Œè¾“å…¥äº‹ä»¶æœ‰ç€æ¯”æ˜¾ç¤ºå±å¹•æ›´é«˜çš„ä¿çœŸåº¦ã€‚\u003c/p\u003e\n\u003cp\u003eå¦‚æœä¸€è¿ä¸² \u003ccode\u003etouchmove\u003c/code\u003e è¿™æ ·çš„äº‹ä»¶ä»¥æ¯ç§’ 120 æ¬¡çš„é¢‘ç‡å‘é€å¾€ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè§¦å‘è¿‡é‡çš„å‘½ä¸­æ£€æµ‹åŠ JavaScript è„šæœ¬æ‰§è¡Œã€‚ç›¸å½¢è€Œè¨€ï¼Œæˆ‘ä»¬çš„å±å¹•åˆ·æ–°ç‡åˆ™ä½ä¸‹å¾—å¤šã€‚\u003c/p\u003e\n\u003cimg alt=\"å¤§é‡äº‹ä»¶æ¶Œå…¥åˆæˆå¸§æ—¶é—´è½´ä¼šé€ æˆé¡µé¢é—ªçƒ\" src=\"../../assets/browser-working-principle/massive-event-and-website-flicker.png\" width=\"640\" /\u003e\u003cp\u003eä¸ºäº†é™ä½å¾€ä¸»çº¿ç¨‹ä¸­ä¼ é€’è¿‡é‡è°ƒç”¨ï¼ŒChrome ä¼šåˆå¹¶è¿™äº›è¿ç»­äº‹ä»¶ï¼ˆå¦‚ï¼š\u003ccode\u003ewheel\u003c/code\u003eã€\u003ccode\u003emousewheel\u003c/code\u003eã€\u003ccode\u003emousemove\u003c/code\u003eã€\u003ccode\u003epointermove\u003c/code\u003eã€\u003ccode\u003etouchmove\u003c/code\u003e ç­‰ï¼‰ï¼Œå¹¶å°†å…¶å»¶è¿Ÿè‡³ä¸‹ä¸€æ¬¡ \u003ccode\u003erequestAnimationFrame\u003c/code\u003e å‰å‘é€ã€‚\u003c/p\u003e\n\u003cimg alt=\"ç›¸åŒçš„æ—¶é—´è½´ä¸‹äº‹ä»¶è¢«åˆå¹¶ä¸”å»¶è¿Ÿå‘é€\" src=\"../../assets/browser-working-principle/same-timeline-composite-event.png\" width=\"640\" /\u003e\u003cp\u003eæ‰€æœ‰ç‹¬ç«‹çš„äº‹ä»¶ï¼Œå¦‚: \u003ccode\u003ekeydown\u003c/code\u003eã€\u003ccode\u003ekeyup\u003c/code\u003eã€\u003ccode\u003emouseup\u003c/code\u003eã€\u003ccode\u003emousedown\u003c/code\u003eã€\u003ccode\u003etouchstart\u003c/code\u003e åŠ \u003ccode\u003etouchend\u003c/code\u003e åˆ™ä¼šç«‹å³å‘å¾€ä¸»çº¿ç¨‹ã€‚\u003c/p\u003e\n\u003ch2\u003eå¸§å†…äº‹ä»¶\u003c/h2\u003e\n\u003cp\u003eäº‹ä»¶åˆå¹¶å¯å¸®åŠ©å¤§å¤šæ•° Web åº”ç”¨æ„å»ºè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ç„¶è€Œï¼Œå¦‚æœä½ å¼€å‘çš„æ˜¯ä¸€ä¸ªç»˜å›¾ç±»åº”ç”¨ï¼Œéœ€è¦åŸºäº \u003ccode\u003etouchmove\u003c/code\u003e äº‹ä»¶çš„åæ ‡ç»˜åˆ¶çº¿è·¯ï¼Œé‚£ä¹ˆåœ¨ä½ è¯•å›¾ç”»ä¸‹ä¸€æ ¹å…‰æ»‘çš„çº¿æ¡æ—¶ï¼ŒåŒºé—´å†…çš„ä¸€äº›åæ ‡ç‚¹ä¹Ÿå¯èƒ½ä¼šå› äº‹ä»¶åˆå¹¶è€Œä¸¢å¤±ã€‚è¿™æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ç›®æ ‡äº‹ä»¶çš„ \u003ccode\u003egetCoalescedEvents\u003c/code\u003e æ–¹æ³•è·å–äº‹ä»¶åˆå¹¶åçš„ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003cimg alt=\"å·¦ä¸ºæµç•…çš„è§¦æ‘¸æ‰‹åŠ¿è·¯å¾„ã€å³ä¸ºäº‹ä»¶åˆå¹¶åçš„æœ‰é™è·¯å¾„\" src=\"../../assets/browser-working-principle/touch-gesture-and-coalesced-event.png\" width=\"520\" /\u003e\u003cp\u003e\u0026lt;br /\u0026gt;\u003c/p\u003e\n\u003cpre class=\"hljs language-js\"  style=--lang:\"js\" \u003e\u003ccode\u003e\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;pointermove\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eevent\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e events = event.\u003cspan class=\"hljs-title function_\"\u003egetCoalescedEvents\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e event \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e events) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e x = event.\u003cspan class=\"hljs-property\"\u003epageX\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e y = event.\u003cspan class=\"hljs-property\"\u003epageY\u003c/span\u003e;\n    \u003cspan class=\"hljs-comment\"\u003e// ä½¿ç”¨ xã€y åæ ‡ç”»çº¿\u003c/span\u003e\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eå‚è€ƒèµ„æ–™\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developers.google.com/web/updates/2018/09/inside-browser-part4\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eğŸ“ è‹±è¯­åŸæ–‡ï¼šInside look at modern web browserï¼ˆPart 4ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://juejin.im/post/6844903695600058375\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\u003eğŸ“ ç°ä»£æµè§ˆå™¨å†…éƒ¨æ­ç§˜ï¼ˆPart 4ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"div\",null,{\"className\":\"markdown-body\",\"children\":[\"$\",\"article\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$c\"}}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"front-end\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"front-end knowledge\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"6:null\n"])</script></body></html>