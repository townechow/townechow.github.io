1:"$Sreact.fragment"
2:I[5244,[],""]
3:I[3866,[],""]
5:I[6213,[],"OutletBoundary"]
7:I[6213,[],"MetadataBoundary"]
9:I[6213,[],"ViewportBoundary"]
b:I[4835,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/ec0a9d078e716e00.css","style"]
:HL["/_next/static/css/485ff6fe79292a08.css","style"]
:HL["/_next/static/css/0ff121a467c0636f.css","style"]
0:{"P":null,"b":"ToCgoFiTXvECVEVLCeZww","p":"","c":["","front-end","computer-networks","http","content-security-policy"],"i":false,"f":[[["",{"children":["front-end",{"children":[["slug","computer-networks/http/content-security-policy","oc"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ec0a9d078e716e00.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":["$","body",null,{"className":"__variable_4d318d __variable_ea5f4b antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}],{"children":["front-end",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/485ff6fe79292a08.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/0ff121a467c0636f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","main",null,{"children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","front-end","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],{"children":[["slug","computer-networks/http/content-security-policy","oc"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","front-end","children","$0:f:0:1:2:children:2:children:0","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L4",null,["$","$L5",null,{"children":"$L6"}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","h_ADiVDf74AKxHBYKcoQ0",{"children":[["$","$L7",null,{"children":"$L8"}],["$","$L9",null,{"children":"$La"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}]]}],false]],"m":"$undefined","G":["$b","$undefined"],"s":false,"S":true}
c:T2caa,<h1>HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥</h1>
<p>å†…å®¹å®‰å…¨ç­–ç•¥ (CSP) æ˜¯ä¸€ä¸ªé¢å¤–çš„å®‰å…¨å±‚ï¼Œç”¨äºæ£€æµ‹å¹¶å‰Šå¼±æŸäº›ç‰¹å®šç±»å‹çš„æ”»å‡»ï¼ŒåŒ…æ‹¬è·¨ç«™è„šæœ¬ (XSS) å’Œæ•°æ®æ³¨å…¥æ”»å‡»ç­‰ã€‚æ— è®ºæ˜¯æ•°æ®ç›—å–ã€ç½‘ç«™å†…å®¹æ±¡æŸ“è¿˜æ˜¯æ•£å‘æ¶æ„è½¯ä»¶ï¼Œè¿™äº›æ”»å‡»éƒ½æ˜¯ä¸»è¦çš„æ‰‹æ®µã€‚</p>
<p>CSP æ˜¯ä¸€ç§ç”±å¼€å‘è€…å®šä¹‰çš„å®‰å…¨æ€§æ”¿ç­–æ€§ç”³æ˜ï¼Œé€šè¿‡ CSP æ‰€çº¦æŸçš„è§„åˆ™æŒ‡å®šå¯ä¿¡çš„å†…å®¹æ¥æºï¼ˆè¿™é‡Œçš„å†…å®¹å¯ä»¥æŒ‡è„šæœ¬ã€å›¾ç‰‡ã€<code>iframe</code>ã€<code>font</code>ã€<code>style</code> ç­‰ç­‰å¯èƒ½çš„è¿œç¨‹çš„èµ„æºï¼‰ã€‚é€šè¿‡ CSP åå®šï¼Œè®© Web å¤„äºä¸€ä¸ªå®‰å…¨çš„è¿è¡Œç¯å¢ƒä¸­ã€‚</p>
<p>ä¸ºä½¿ CSP å¯ç”¨ï¼Œéœ€è¦é…ç½®ç½‘ç»œæœåŠ¡å™¨è¿”å› <code>Content-Security-Policy</code> HTTP å¤´éƒ¨ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>&lt;meta&gt;</code> å…ƒç´ ä¹Ÿå¯ä»¥ç”¨äºé…ç½®è¯¥ç­–ç•¥ï¼š</p>
<pre class="hljs"><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span> /&gt;</span>
</code></pre>
<h2>æŒ‡ä»¤é€‰é¡¹</h2>
<h3>èµ„æºåŠ è½½æŒ‡ä»¤</h3>
<p>é€šè¿‡è·å–æŒ‡ä»¤æ¥æ§åˆ¶æŸäº›å¯èƒ½è¢«åŠ è½½çš„ç¡®åˆ‡çš„èµ„æºç±»å‹çš„ä½ç½®ï¼š</p>
<p>CSP ç­–ç•¥åœ¨é»˜è®¤çš„æƒ…å†µä¸‹æ˜¯ä¸å…è®¸ä½¿ç”¨ <code>data URIs</code> èµ„æºçš„ï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œé‚£ä¹ˆéœ€è¦æ˜¾ç¤ºçš„æŒ‡å®šï¼š</p>
<ul>
<li><code>script-src</code>ï¼šåœ¨å¤„ç†è„šæœ¬èµ„æºçš„æ—¶å€™è®¾ç½® <code>unsafe-inline</code> å¯ä»¥é˜»æ­¢å†…è” Js ä»£ç çš„æ‰§è¡Œï¼Œä½¿ç”¨ <code>unsafe-eval</code> å¼€å…³å¯ä»¥ç¦æ­¢ <code>eval</code>ã€<code>setTimeout</code>ã€<code>setInterval</code> å‡½æ•°çš„æ‰§è¡Œ</li>
<li><code>style-src</code>ï¼šä¼šæ§åˆ¶æ ·å¼è¡¨@import å’Œ rel æ—¶æ‰€å¼•å…¥çš„ URI èµ„æºï¼Œè®¾ç½® unsafe-inline è§„åˆ™å¯ä»¥æ˜¯æµè§ˆå™¨æ‹’ç»è§£æå†…éƒ¨æ ·å¼å’Œå†…è”æ ·å¼å®šä¹‰ã€‚å¹¶ä¸ä¼šé˜»æ­¢é“¾å…¥å¤–éƒ¨æ ·å¼è¡¨ã€‚</li>
<li><code>img-src</code>ï¼šå¯ä»¥æ§åˆ¶å›¾ç‰‡èµ„æºçš„è¿æ¥ï¼ŒåŒ…æ‹¬ <code>img</code> æ ‡ç­¾çš„ <code>src</code> å±æ€§ï¼Œä»¥åŠ CSS3 ä¸­çš„ <code>url()</code> å’Œ <code>image()</code> æ–¹æ³•ï¼Œä»¥åŠ <code>link</code> æ ‡ç­¾ä¸­çš„ <code>href</code> å±æ€§ï¼ˆå½“ <code>rel</code> è®¾ç½®æˆä¸å›¾åƒç›¸å…³çš„å€¼ï¼Œæ¯”å¦‚ HTML æ”¯æŒçš„ iconï¼‰</li>
<li><code>font-src</code>ï¼šæ§åˆ¶ CSS ä¸­çš„ <code>@font-face</code> åŠ è½½çš„å­—ä½“æºåœ°å€</li>
<li><code>frame-src</code>ï¼šè®¾ç½®å…è®¸é€šè¿‡ç±»ä¼¼ <code>&lt;frame&gt;</code> å’Œ <code>&lt;iframe&gt;</code> æ ‡ç­¾åŠ è½½çš„å†…åµŒå†…å®¹çš„æºåœ°å€</li>
<li><code>manifest-src</code>ï¼šé™åˆ¶åº”ç”¨å£°æ˜æ–‡ä»¶çš„æºåœ°å€</li>
<li><code>media-src</code>ï¼šæ§åˆ¶åª’ä½“ç±»å‹çš„å¤–éƒ¨é“¾å…¥èµ„æºï¼Œå¦‚ <code>&lt;audio&gt;</code>ã€<code>&lt;video&gt;</code>ã€<code>&lt;source&gt;</code> å’Œ <code>&lt;track&gt;</code> æ ‡ç­¾çš„ <code>src</code> å±æ€§</li>
<li><code>object-src</code>ï¼šæ§åˆ¶ <code>&lt;embed&gt;</code>ã€<code>&lt;code&gt;</code>ã€<code>&lt;archive&gt;</code>ã€<code>&lt;applet&gt;</code> ç­‰å¯¹è±¡</li>
<li><code>prefetch-src</code>ï¼šæŒ‡å®šé¢„åŠ è½½æˆ–é¢„æ¸²æŸ“çš„å…è®¸æºåœ°å€</li>
<li><code>connect-src</code>ï¼šæ§åˆ¶ XMLHttpRequest ä¸­çš„ <code>open()</code>ã€WebSocketã€EventSource</li>
</ul>
<p>å¦å¤– <code>inline script</code> å’Œ <code>eval</code> ç±»å‹å‡½æ•°ï¼ˆåŒ…æ‹¬ <code>eval</code>ã€<code>setInterval</code>ã€<code>setTimeout</code> å’Œ <code>new Function()</code>ï¼‰ä¹Ÿæ˜¯ä¸è¢«æ‰§è¡Œçš„ã€‚</p>
<h3>default-src</h3>
<p><code>default-src</code> ç”¨äºè®¾ç½®ä¸Šé¢å„ä¸ªé€‰é¡¹çš„é»˜è®¤å€¼ã€‚</p>
<pre class="hljs"><code class="language-http"><span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>default-src &#x27;self&#x27;
</code></pre>
<p>ä¸Šé¢ä»£ç é™åˆ¶æ‰€æœ‰å¤–éƒ¨èµ„æºï¼Œåªèƒ½ä»å½“å‰æ¸”æ°‘è¯¥åŠ è½½ã€‚</p>
<p>å¦‚æœåŒæ—¶è®¾ç½®æŸä¸ªå•é¡¹é™åˆ¶ï¼ˆæ¯”å¦‚ <code>font-src</code>ï¼‰å’Œ <code>default-src</code>ï¼Œå‰è€…ä¼šè¦†ç›–åè€…ï¼Œå³å­—ä½“æ–‡ä»¶ä¼šé‡‡ç”¨ <code>font-src</code> çš„å€¼ï¼Œå…¶ä»–èµ„æºä¾ç„¶é‡‡ç”¨ <code>default-src</code> çš„å€¼ã€‚</p>
<h3>å…¶ä»–é™åˆ¶</h3>
<p>å…¶ä»–ä¸€äº›å®‰å…¨ç›¸å…³çš„åŠŸèƒ½ï¼Œä¹Ÿæ”¾åœ¨äº† CSP é‡Œé¢ï¼š</p>
<ul>
<li><code>block-all-mixed-content</code>ï¼šHTTPS ç½‘é¡µä¸å¾—åŠ è½½ HTTP èµ„æºï¼ˆæµè§ˆå™¨å·²ç»é»˜è®¤å¼€å¯ï¼‰</li>
<li><code>upgrade-insecure-requests</code>ï¼šè‡ªåŠ¨å°†ç½‘é¡µä¸Šæ‰€æœ‰åŠ è½½å¤–éƒ¨èµ„æºçš„ HTTP é“¾æ¥æ¢æˆ HTTPS åè®®</li>
<li><code>plugin-types</code>ï¼šé™åˆ¶å¯ä»¥ä½¿ç”¨çš„æ’ä»¶æ ¼å¼</li>
<li><code>sandbox</code>ï¼šæµè§ˆå™¨è¡Œä¸ºçš„é™åˆ¶ï¼Œæ¯”å¦‚ä¸èƒ½æœ‰å¼¹å‡ºçª—å£ç­‰ã€‚</li>
</ul>
<h3>report-uri</h3>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…å¸Œæœ›é˜²æ­¢ XSSï¼Œè¿˜å¸Œæœ›è®°å½•æ­¤ç±»è¡Œä¸ºã€‚<code>report-uri</code> å°±ç”¨æ¥å‘Šè¯‰æµè§ˆå™¨ï¼Œåº”è¯¥æŠŠæ³¨å…¥è¡Œä¸ºæŠ¥å‘Šç»™å“ªä¸ªç½‘å€ã€‚</p>
<pre class="hljs"><code class="language-http"><span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>default-src &#x27;self&#x27;; ...; report-uri /my_amazing_csp_report_parser;
</code></pre>
<p>ä¸Šé¢ä»£ç æŒ‡å®šï¼Œå°†æ³¨å…¥è¡Œä¸ºæŠ¥å‘Šç»™ <code>/my_amazing_csp_report_parser</code> è¿™ä¸ª URLã€‚</p>
<p>æµè§ˆå™¨ä¼šä½¿ç”¨ <code>POST</code> æ–¹æ³•ï¼Œå‘é€ä¸€ä¸ª <code>JSON</code> å¯¹è±¡ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre class="hljs"><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;csp-report&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;document-uri&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://example.org/page.html&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;referrer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://evil.example.com/&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;blocked-uri&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://evil.example.com/evil.js&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;violated-directive&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;script-src &#x27;self&#x27; https://apis.google.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;original-policy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;script-src &#x27;self&#x27; https://apis.google.com; report-uri http://example.org/my_amazing_csp_report_parser&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2>é€‰é¡¹å€¼</h2>
<p>æ¯ä¸ªé™åˆ¶é€‰é¡¹å¯ä»¥è®¾ç½®ä»¥ä¸‹å‡ ç§å€¼ï¼Œè¿™äº›å€¼å°±æ„æˆäº†ç™½åå•ã€‚</p>
<ul>
<li><strong>ä¸»æœºå</strong>ï¼š<code>example.org</code>ã€<code>https://example.com:443</code></li>
<li><strong>è·¯å¾„å</strong>ï¼š<code>example.org/resources/js/</code></li>
<li><strong>é€šé…ç¬¦</strong>ï¼š<code>*.example.org</code>ã€<code>*://*.example.com:*</code>ï¼ˆè¡¨ç¤ºä»»æ„åè®®ã€ä»»æ„å­åŸŸåã€ä»»æ„ç«¯å£ï¼‰</li>
<li><strong>åè®®å</strong>ï¼š<code>https:</code>ã€<code>data:</code></li>
<li><strong>å…³é”®å­— <code>'self'</code></strong>ï¼šå½“å‰åŸŸåï¼Œéœ€è¦åŠ å¼•å·</li>
<li><strong>å…³é”®å­— <code>'none'</code></strong>ï¼šç¦æ­¢åŠ è½½ä»»ä½•å¤–éƒ¨èµ„æºï¼Œéœ€è¦åŠ å¼•å·</li>
</ul>
<p>å¤šä¸ªå€¼ä¹Ÿå¯ä»¥å¹¶åˆ—ï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚</p>
<pre class="hljs"><code class="language-http"><span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>script-src &#x27;self&#x27; https://apis.google.com
</code></pre>
<p>å¦‚æœåŒä¸€ä¸ªé™åˆ¶é€‰é¡¹ä½¿ç”¨å¤šæ¬¡ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ä¼šç”Ÿæ•ˆã€‚</p>
<pre class="hljs"><code class="language-http"># é”™è¯¯çš„å†™æ³•
<span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>script-src https://host1.com; script-src https://host2.com

# æ­£ç¡®çš„å†™æ³•
<span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>script-src https://host1.com https://host2.com
</code></pre>
<h2>script-src çš„ç‰¹æ®Šå€¼</h2>
<p>é™¤äº†å¸¸è§„å€¼ï¼Œ<code>script-src</code> è¿˜å¯ä»¥è®¾ç½®ä¸€äº›ç‰¹æ®Šå€¼ã€‚æ³¨æ„ï¼Œä¸‹é¢è¿™äº›å€¼éƒ½å¿…é¡»æ”¾åœ¨å•å¼•å·é‡Œé¢ã€‚</p>
<ul>
<li><code>unsafe-inline</code>ï¼šå…è®¸æ‰§è¡Œé¡µé¢å†…åµŒçš„ <code>&amp;lt;script&gt;</code> æ ‡ç­¾å’Œäº‹ä»¶ç›‘å¬å‡½æ•°</li>
<li><code>unsafe-eval</code>ï¼šå…è®¸å°†å­—ç¬¦ä¸²å½“ä½œä»£ç æ‰§è¡Œï¼Œæ¯”å¦‚ä½¿ç”¨ <code>eval</code>ã€<code>setTimeout</code>ã€<code>setInterval</code> å’Œ <code>Function</code> ç­‰å‡½æ•°ã€‚</li>
<li><code>nonce</code> å€¼ï¼šæ¯æ¬¡ HTTP å›åº”ç»™å‡ºä¸€ä¸ªæˆæƒ tokenï¼Œé¡µé¢å†…åµŒè„šæœ¬å¿…é¡»æœ‰è¿™ä¸ª tokenï¼Œæ‰ä¼šæ‰§è¡Œ</li>
<li><code>hash</code> å€¼ï¼šåˆ—å‡ºå…è®¸æ‰§è¡Œçš„è„šæœ¬ä»£ç çš„ Hash å€¼ï¼Œé¡µé¢å†…åµŒè„šæœ¬çš„å“ˆå¸Œå€¼åªæœ‰å»åˆçš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½æ‰§è¡Œã€‚</li>
</ul>
<p><code>nonce</code> å€¼çš„ä¾‹å­å¦‚ä¸‹ï¼ŒæœåŠ¡å™¨å‘é€ç½‘é¡µçš„æ—¶å€™ï¼Œå‘Šè¯‰æµè§ˆå™¨ä¸€ä¸ªéšæœºç”Ÿæˆçš„ <code>token</code>ã€‚</p>
<pre class="hljs"><code class="language-http"><span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>script-src &#x27;nonce-EDNnf03nceIOfn39fn3e9h3sdfa&#x27;
</code></pre>
<p>é¡µé¢å†…åµŒè„šæœ¬ï¼Œå¿…é¡»æœ‰è¿™ä¸ª token æ‰èƒ½æ‰§è¡Œã€‚</p>
<pre class="hljs"><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">nonce</span>=<span class="hljs-string">&quot;EDNnf03nceIOfn39fn3e9h3sdfa&quot;</span>&gt;</span><span class="language-javascript">
  <span class="hljs-comment">// some code</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><code>hash</code> å€¼çš„ä¾‹å­å¦‚ä¸‹ï¼ŒæœåŠ¡å™¨ç»™å‡ºä¸€ä¸ªå…è®¸æ‰§è¡Œçš„ä»£ç çš„ <code>hash</code> å€¼ã€‚</p>
<pre class="hljs"><code class="language-http"><span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>script-src &#x27;sha256-qznLcsROx4GACP2dm0UCKCzCG-HiZ1guq6ZZDob_Tng=&#x27;
</code></pre>
<p>ä¸‹é¢çš„ä»£ç å°±ä¼šå…è®¸æ‰§è¡Œï¼Œå› ä¸º hash å€¼ç›¸ç¬¦ã€‚</p>
<pre class="hljs"><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript">
  <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Hello, world.&#x27;</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ³¨æ„ï¼Œè®¡ç®— <code>hash</code> å€¼çš„æ—¶å€™ï¼Œ<code>&lt;script&gt;</code> æ ‡ç­¾ä¸ç®—åœ¨å†…ã€‚</p>
<p>é™¤äº† <code>script-src</code> é€‰é¡¹ï¼Œ<code>nonce</code> å€¼å’Œ <code>hash</code> å€¼è¿˜å¯ä»¥ç”¨åœ¨ <code>style-src</code> é€‰é¡¹ï¼Œæ§åˆ¶é¡µé¢å†…åµŒçš„æ ·å¼è¡¨ã€‚</p>
<h2>å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP" target="_blank" rel="noopener noreferrer nofollow">ğŸ“– å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/09/csp.html" target="_blank" rel="noopener noreferrer nofollow">ğŸ“ Content Security Policy å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="https://www.zhihu.com/question/21979782" target="_blank" rel="noopener noreferrer nofollow">ğŸ“ Content Security Policyï¼ˆCSPï¼‰æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒèƒ½æŠµå¾¡ XSS æ”»å‡»ï¼Ÿ</a></li>
</ul>
4:["$","div",null,{"className":"markdown-body","children":[["$","h1",null,{"children":"HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥"}],["$","article",null,{"dangerouslySetInnerHTML":{"__html":"$c"}}]]}]
a:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"front-end"}],["$","meta","2",{"name":"description","content":"front-end knowledge"}],["$","link","3",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
6:null
